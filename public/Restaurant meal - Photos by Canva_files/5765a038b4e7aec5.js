(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[13952],{

/***/ 809943:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(59401);__web_req__(659506);self._5880d4398c473aa67256e87589eaef11 = self._5880d4398c473aa67256e87589eaef11 || {};(function(__c) {var Vq;var Pq;var Ep;var Cp;var Dp;var sq;var Yo;var gp;var vp;var Po;var ap;var Lq;var To;var dp;var Ro;var fo=__c.fo;var kp;var jp;var Gq;var Fq;var hp;var ep;var Aq;var da=__c.da;var Zo;var No;var hq;var mq;var lq;var nq;var jq;var kq;var oq;var Qo;var Uo;var fq;var iq;var gb=__c.gb;var gq;var Ao;var zo;var yo;var eq;var Xp;var Og=__c.Og;var Pp;var Op;var Np;var Mp;var Lp;var Jp;var po=__c.po;var pp;var op;var lp;var bp;var Mo;var Lo;var Wo;var Xo;var Vo;var Oo;var ka=__c.ka;var m=__c.m;
var r=__c.r;var xo;var ja=__c.ja;
var ujb,wo,vjb,wjb,xjb,Bo,Ajb,Cjb,Co,Do,Fjb,Djb,Ejb,Hjb,Eo,Ljb,Mjb,Njb,Ojb,Pjb,Qjb,Rjb,Sjb,Fo,Go,Ho,Tjb,Ujb,Io,Xjb,Ko,akb,ckb,dkb,bkb,fkb,gkb,hkb,ikb,jkb,kkb,vkb,Akb,Ekb,Fkb,Gkb,Lkb,Mkb,Nkb,Okb,Pkb,Skb,Tkb,Vkb,Wkb,Ykb,$kb,alb,mp,clb,elb,flb,ilb,jlb,sp,klb,llb,mlb,up,olb,plb,qlb,slb,tlb,ulb,vlb,xlb,ylb,Fp,Jlb,Gp,Hp,Llb,Mlb,Ip,Plb,Rlb,Qlb,Slb,Tlb,Vlb,Xlb,Olb,Zlb,Ylb,$lb,bmb,cmb,Qp,dmb,gmb,emb,fmb,Sp,jmb,lmb,imb,kmb,mmb,nmb,hmb,omb,pmb,Up,rmb,smb,tmb,Vp,umb,vmb,wmb,xmb,Bmb,$p,Zp,Cmb,bq,Dmb,Emb,Fmb,Gmb,
Hmb,Imb,Jmb,Lmb,cq,Mmb,Omb,dq,Pmb;ujb=function(a,b){ja(b.length>0);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;b>1;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};wo=function(a,b,c){ja(a.ri(b,c),"{} != {}",b,c)};vjb=function(a,b){return new xo(b(a.ou),b(a.Pu),a.sva,a.PBa)};
yo=__c.yo=function(a,b){return new xo(a,b,!1,!1)};zo=__c.zo=function(a){return new xo(void 0,a,!0,!1)};Ao=__c.Ao=function(a,b){a.sva||(a.sva=b.sva);a.PBa||(a.PBa=b.PBa);return b};wjb=function(a,b=!0){a.sva||(a.sva=b)};xjb=function(a,b=!0){a.PBa||(a.PBa=b)};Bo=function(a){return a===1?yjb:{type:0,length:a}};Ajb=function(a){return a===1?zjb:{type:1,length:a}};Cjb=function(a){return a===1?Bjb:{type:2,length:a}};Co=function(a,b){return{type:3,state:a,shift:b}};Do=function(a,b){return{type:4,delta:a,shift:b}};
Fjb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${Djb(a.state)})${Ejb(a.shift)}`;case 4:return`U(${Djb(a.delta)})${Ejb(a.shift)}`;default:throw new r(a);}};Djb=function(a){return a!=null?a:"\u22a5"};Ejb=function(a){return a!=null?`[${a.Ph},${a.zm}]`:""};
Hjb=function(a,b){return b&&a.TNa?new Gjb(a.ops.map(c=>c.type===3&&c.shift?Co(c.state,{Ph:c.shift.Ph+b,zm:c.shift.zm+b}):c.type===4&&c.shift?Do(c.delta,{Ph:c.shift.Ph+b,zm:c.shift.zm+b}):c),a.pre,a.post,a.TNa):a};Eo=function(a,b){const c=m(a.Cm);if(c.type===0)return a.ED(0,1),Ijb;if(c.type===1)return a.ED(1,1),Jjb;if(c.type===2)return a.ED(2,1),Kjb;if(c.type!==b)throw Error();a.Cm=a.ops[a.i++];return c};Ljb=function(a){return a.every(()=>!1)};
Mjb=function(a,b){ja(b.length>0);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};Njb=function(a){ja(a.Sxa<a.input.length,"{} >= {}",a.Sxa,a.input.length);return a.input[a.Sxa++]};Ojb=function(a,b){b=a.Sxa+b;ja(b<=a.input.length);const c=a.input.slice(a.Sxa,b);a.Sxa=b;return c};Pjb=function(a,b){a.djb||(a.djb=new Set);ja(!a.djb.has(b),"duplicate modification: {}",b);a.djb.add(b)};Qjb=function(a,b,c){Pjb(a,b);(a.Nxc||(a.Nxc=new Map)).set(b,c)};
Rjb=function(a,b,c){Pjb(a,b);(a.Mxc||(a.Mxc=new Map)).set(b,c)};Sjb=function(a,b){let {Ph:c,zm:d}=b;var e=a.Nxc;a=a.Mxc;if(e){const f=e.get(c);f!=null&&(c=f,e.delete(c))}a&&(e=a.get(d),e!=null&&(d=e,a.delete(d)));return c!==b.Ph||d!==b.zm?{Ph:c,zm:d}:b};Fo=function(a,b,c){Pjb(a,b);c!=null&&(a.C5a||(a.C5a=new Map)).set(b,c)};Go=function(a,b,c){(a.tPa||(a.tPa=new Map)).set(b,c)};Ho=function(a,b,c){(a.KOa||(a.KOa=new Map)).set(c,b)};Tjb=function({Ph:a,zm:b}){return{Ph:b,zm:a}};
Ujb=function(a,b){return a?!!b&&a.Ph===b.Ph&&a.zm===b.zm:!b};__c.Vjb=function(a){return a.filter(()=>!0)};Io=function(a,b){ja(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};Xjb=function(a,b){return a===Jo?b:b===Jo?a:new Wjb(a,b)};Ko=function(a,b){return b===Jo?Jo:new a(b)};akb=function(a){a:{a={items:Ko(Yjb,a),Zj:Jo};for(b in a)if(a[b]!==Jo){var b=new Zjb(a);break a}b=Jo}return Xjb($jb,b)};
ckb=function(a,b){ka(a.vL!=null,"mutable not connected");try{a.N_(b),a.domain.isIdentity(b)||a.g1b&&a.g1b.reportChanged()}catch(c){throw a.error(c),c;}bkb(a,b)};dkb=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};bkb=function(a,b){ka(a.vL!=null);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
Lo=__c.Lo=function(a,b){a.Qec||(a.Qec={next:c=>{a.vL&&(a.g1b&&a.g1b.reportChanged(),bkb(a,c),a.vL.next(c))},error:c=>{a.error(c)}});return new ekb(a.Qec,b)};Mo=__c.Mo=function(a,b,c){b=a.iA(b);a=a.connect(b,c);return{mutable:b,Gx:a}};No=__c.No=function(a,b,c,d){a.destroy(d,b);c.complete()};fkb=function(a,b){let c=a.rows[b];c==null&&(c=a.rows[b]=a.Gjd++);return c};gkb=function(a,b){let c=a.cols[b];c==null&&(c=a.cols[b]=a.Ejd++);return c};
hkb=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};ikb=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};jkb=function(a,b){ja(a.zP(b),"invalid value: {}",b);return b};
kkb=function(a,b,c){if(!a.bx(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};Oo=__c.Oo=function(a){return new lkb(a)};Po=__c.Po=function(...a){return a.length===1?new mkb(a[0]):new nkb(new Set(a))};Qo=__c.Qo=function(a,b){return new okb(a,b,Ko(Yjb,a.serializer))};__c.rkb=function(a,b){return new pkb(a,b,Ko(qkb,b.serializer))};Ro=__c.Ro=function(a,b){return new skb(a,b)};__c.So=function(a,b){return new tkb(a,b)};To=__c.To=function(a){return new ukb(a)};
vkb=function(a,b){ja(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return Oo(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Uo=__c.Uo=function(a,b){ja(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return Oo(c=>Number.isFinite(c)&&a<=c&&c<=b)};Wo=__c.Wo=function(a){return a instanceof Vo?new wkb(a,Ko(xkb,a.serializer)):new ykb(a,Ko(xkb,a.w9b),Ko(xkb,a.Vsa))};Akb=function(a){return new zkb(a)};Xo=__c.Xo=function(a){return new Bkb(a,a.serializer)};Yo=__c.Yo=function(a){return new Ckb(a,a.Vsa)};
Zo=__c.Zo=function(a){return Xo(Wo(a))};Ekb=function(a,b,c){return c==null||a.component.isIdentity(c)?Dkb:new Map([[b,c]])};Fkb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Gkb=function(a,b,c){const d=Lo(a,g=>a.domain.update(b,g)),{mutable:e,Gx:f}=Mo(a.type,c,d);return{EYc:{to:f,from:d},value:e}};__c.$o=function(...a){[,a]=a.length===1?[void 0,a[0]]:a;return new Hkb(a,Ko(qkb,a.Vsa))};ap=__c.ap=function(a){return new Ikb(a,a.serializer)};
__c.cp=function({get:a,set:b,equals:c}){return new Jkb(bp(a,{set:b,equals:c}))};Lkb=function(a,b,c){return Kkb.of({...a,...b,...c})};Mkb=function(...a){const b=new Set;for(const c of a)for(const d in c)ja(!b.has(d),'duplicate key: "{}"',d),b.add(d)};Nkb=function(a,b){return Lo(a,c=>({[b]:c}))};Okb=function(a,b){return Lo(a,c=>({[b]:c}))};
Pkb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Rb:{...a.Rb,...b.Rb},attributes:{...a.attributes,...b.attributes},create:e=>{const {Rb:f,attributes:g}=c(e),{Rb:h,attributes:k}=d({...e,...f,...g});return{Rb:{...f,...h},attributes:{...g,...k}}}}};dp=__c.dp=function(a){return Qkb.Ai(a)};ep=__c.ep=function(a){return a.domain.Og()};gp=__c.gp=function(a){return new __c.Rkb(a,akb(a.Vsa))};hp=__c.hp=function(){throw Error("list not modifiable");};
__c.ip=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};Skb=function(a,b){a=a.length;ja(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};Tkb=function(a,b){a=a.length;ja(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.Ukb=function(a,b){return a?b?{ib:__c.ip(a.ib,b.ib),item:__c.ip(a.item,b.item),Zj:__c.ip(a.Zj,b.Zj)}:a:b};Vkb=function(a,b){a=a.jca;ja(0<b&&b<a,"{} \u2209 (0, {})",0,a)};Wkb=function(a,b){a=a.P2;ja(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
jp=__c.jp=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.vY(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.x5a(c.state);case 2:return a.gsa(b.state);default:throw new r(c);}default:throw new r(b);}};kp=__c.kp=function(a){const b=m(a.Cm);a.Cm=a.ops[a.i++];return b};__c.Xkb=function(a,b){const c=m(a.Cm),d=c.jca;ja(0<b&&b<=d);if(b<d){const [e,f]=c.XSb(b);a.Cm=f;return e}a.Cm=a.ops[a.i++];return c};
Ykb=function(a,b){const c=m(a.Cm),d=c.P2;ja(0<b&&b<=d);if(b<d){const [e,f]=c.WSb(b);a.Cm=f;return e}a.Cm=a.ops[a.i++];return c};$kb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ja(b.type===1),new lp(a.component.apply(b.state,c.delta));case 3:return __c.Zkb(a,b,c.oldState),c.newState;default:throw new r(c);}};
alb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ja(b.type===1),new lp(a.component.Rl(b.state,c.delta));case 3:return __c.Zkb(a,b,c.newState),c.oldState;default:throw new r(c);}};mp=function(a,b,c){switch(b.type){case 0:return c.type===0&&b.state===c.state;case 1:return c.type===1&&a.component.ri(b.state,c.state);case 2:return c.type===2&&b.state===c.state;default:throw new r(b);}};__c.Zkb=function(a,b,c){ja(mp(a,b,c),"{} != {}",b,c)};
__c.blb=function(a,b){const c=__c.np.Og(),d=a.cursor(0,{...op,Zj:g=>c.retain(g)}),e={...op,ib:g=>c.retain(g.length)},f={...op,ib:g=>c.vY(g)};b.forEach({retain:g=>d.Yn(g,e),delete:g=>d.Yn(g,f),insert:g=>c.insert(g)});return c.build()};
clb=function(a,b){const c=new pp,d=a.cursor();a=h=>{throw Error(String(h));};const e={...op,ib:h=>c.retain(h.length)},f={...op,ib:a},g={...op,ib:()=>0,Zj:a};b.forEach({retain:h=>d.DS(h,e),update:h=>{throw new r(h);},insert:h=>h.type!==2&&c.insert(h.state),change:(h,k)=>{h.type===2?(d.DS(h.length,f),k.type!==2&&c.insert(k.state)):(d.DS(h.length,g),k.type===2?c.delete(h.length):(ja(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.qp=function(a){return Object.keys(a)};
__c.rp=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.dlb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};elb=function(a,b){return{type:0,kG:a,VH:b}};flb=function(a){return{type:1,length:a}};__c.glb=function(a,b){return a&&b?a.so===b.so&&a.sn===b.sn:!a&&!b};__c.hlb=function(a,b){Object.entries(a).forEach(([c,d])=>d!=null&&b(d,c))};
ilb=function(a,b){const c=__c.qp(a),d=__c.qp(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.dlb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.glb(a[f].r,b[f].r))};jlb=function(a,b={}){return{type:0,length:a,changes:b}};sp=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
klb=function(a,b){let c=0,d=0;for(const e of a.Ffa)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};llb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new tp(d,e):a};mlb=function(a,b,c){for(const [d,e]of a){const f=llb(e,b,c);f!==e&&a.set(d,f)}};
up=function(a,b,c,d){for(const [e,f]of a){const g=f.kca,h=f.fca,k=g&&(b!=null?llb(g,b,d):g),l=h&&(c!=null?llb(h,c,d):h);k===g&&l===h||a.set(e,new nlb(k,l))}};olb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};plb=function(a,b){po(a,b);return a};qlb=function(a,b){return{key:a.gVa(b),value:b}};vp=__c.vp=function(a,b,c){return new rlb(a,b,c)};slb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
tlb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};ulb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};vlb=function(a){return new RegExp(`^${a}${"B"}${"[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}"}$`)};__c.wlb=function(a){po(a.normalize(a.defaultValue),a.defaultValue)};__c.wp=function(a,b){return b!=null?a.decode(b):void 0};
__c.xp=function(a,b){return b!=null?a.encode(b):void 0};xlb=function(a){a=a.split("/");return a.length===2?a[0]:void 0};ylb=function(a){if(a.startsWith(`${__c.yp}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.zlb=function(a,b){if(b=ylb(b)){const [c,d]=b;if(a.cdd(c))return[c,d]}};__c.zp=function(a,b,c,d){c=a.Ppa(c);for(const e of Object.keys(b))a.EC(e)&&c(e)&&d(b[e],e)};__c.Ap=function(a,b,c){const d={};a.copy(b,c,d);return d};
__c.Alb=function(a,b,c){return a.attributes[c].bdd?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};__c.Blb=function(a,b,c){const d={};__c.zp(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.Bp=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{ja(a.EC(d)),c[d]=e!=null?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.Dlb=function(a){return new Clb("block",a)};Cp=__c.Cp=function(a,b){return new Elb(a,b)};Dp=__c.Dp=function(a,b,c){return new Flb(a,b,c)};
Ep=__c.Ep=function(a,b){return new Glb(a,b,b[0])};__c.Ilb=function(a){const b=(d,e)=>{if(typeof e==="string")return d[e]?d[e]:(d=xlb(e))&&a.rVa[d]?a.rVa[d]:(e=ylb(e))&&a.Yv[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>b(d,e)!=null,ownKeys:d=>Object.keys(d)});return new __c.Hlb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.rVa)),new Set(Object.keys(a.Yv)))};Fp=function(a){return{type:0,length:a}};Jlb=function(a){return{type:1,length:a}};Gp=function(a,b){return a.ED(1,b).length};
Hp=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Klb;ja(c[0]>=0);b=new Map;a=a.yd(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){ka(c!=null);switch(c.type){case 0:c=a.fA(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=Gp(a,c.length);break;default:throw new r(c);}c=a.head}c&&c.type===1&&(e+=Gp(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
Llb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return Klb;ja(c[0]>=0);b=new Map;a=a.yd(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){ka(c!=null);switch(c.type){case 0:c=a.fA(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=Gp(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};Mlb=function(a){return JSON.stringify(a,(b,c)=>c!=null?c:null)};Ip=function(a){return new Nlb(a.dBd)};
Plb=function(a,b,c,d){var e=Math.max(a.Jq,b.Jq),f=Math.max(a.VA,b.VA);a=a.yd(void 0,e,f);b=b.yd(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&e.type===0||f&&f.type===0){const n=a.Mx(),p=b.Mx(),q=c.Mx();e=n;f=p;for(var g=q,h=d,k=e.head,l=f.head;k||l;){if(k&&k.type===0||l&&l.type===0){k=e.nw();l=f.nw();for(const u of Olb(k,l))g.yn(u,h(u,e.attrs[u],f.attrs[u]))}else if(k&&l)k=Math.min(k.length,l.length),e.zo(k),f.zo(k),g.mC(k);else throw Error(`length mismatch: ${k} x ${l}`);k=e.head;l=f.head}n.finish();
p.finish();q.finish()}else if(e&&f)e=Math.min(e.length,f.length),Jp(a,e),Jp(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};Rlb=function(a,b,c,d){return Kp.isIdentity(c)&&Kp.isIdentity(d)||b.items.isEmpty()?b:Qlb("apply",a.dBd,b,c,d)};
Qlb=function(a,b,c,d,e){const f=new Lp,[g,h]=a==="apply"?[c.items.yd(e.pre),e.yd(c.items.length,0)]:[c.items.yd(e.post),e.yd(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&k.type===1)Gp(h,k.length),a==="apply"?f.Lc(k.length):g.zo(k.length);else if(e&&e.type===0){e=g.nw();const [n,p]=a==="apply"?[e.yd(d.pre),d.yd(e.length,0)]:[e.yd(d.post),d.yd(0,e.length)];e=a;k=new Lp;var l=n.head;let q=p.head;for(;l||q;){if(q&&q.type===1)Gp(p,q.length),e==="apply"?k.Lc(q.length):n.zo(q.length);else if(l)l.type===
0?k.grad(n.nw()):q?(l=Math.min(l.length,q.length),n.zo(l),p.fA(l),k.Lc(l)):(n.zo(l.length),k.Lc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.zo(e),h.fA(e),f.Lc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return Mp.of(b,a,c,a.length)};Slb=function(a){return{type:1,length:a}};
Jp=__c.Jp=function(a,b){ka(a.iX==null);return a.qVa.zo(b)};Tlb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.oc,d.oc)&&a(b,c.r,d.r):!1};__c.Ulb=function(a,b,c,d){if(!d)return c;ja(a(b,c,d.oc),"{} != {}",c,d.oc);return d.r};Vlb=function(a,b,c,d){return Tlb(a,b,c,d)?void 0:{t:c,b:d}};
__c.Wlb=function(a,b,c){const d={};if(b&&c)for(const f of Olb(b,c)){var e=Vlb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of Np(b))(c=Vlb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of Np(c))(b=Vlb(a,f,void 0,c[f]))&&(d[f]=b);return Op(d)?void 0:d};Xlb=function(a,b,c){return Olb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?Tlb(a,d,e.t,f.t)&&Tlb(a,d,e.b,f.b):!1})};Np=__c.Np=function(a){return Object.keys(a)};
Olb=function(a,b){return a&&b?[...(new Set([...Np(a),...Np(b)]))]:a?Np(a):b?Np(b):[]};Op=__c.Op=function(a){return Np(a).length===0};Zlb=function(a,b){b.forEach(a.ph.EC,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};Ylb(e,(h,k)=>{h!=null&&(ka(a.ph.jDa(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};Ylb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};$lb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};
Pp=__c.Pp=function(a,b,c,d){ka(0<=a);ka(0<=b);ka(a<=c);ka(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.amb=function(a,b){return{span:a,state:b}};bmb=function(a){const b=a.rows[a.y];if(b!=null)for(;b.cells[a.x]==null&&a.x<b.cells.length;)a.x++};cmb=function(a){for(;a.rows[a.y]==null&&a.y<a.rows.length;)a.y++};Qp=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
dmb=function(a,b,c,d){if(Kp.isIdentity(c)&&Kp.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=Hp(c,e),h=Hp(d,f),k=new Rp;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
gmb=function(a,b,c){const d=new Rp;emb(b.yd(),c.yd(),(e,f,g,h)=>{b==null&&c==null||d.add(e,f,fmb(a,g,h))});return d.build()};emb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=d==null?1:e==null?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(d<0){const {x:f,y:g,value:h}=a.qu();c(f,g,h,void 0)}else if(d>0){const {x:f,y:g,value:h}=b.qu();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.qu();({value:d}=b.qu());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
fmb=function(a,b,c){if(b==null)return c;if(c==null)return b;switch(b.type){case 0:a:switch(c.type){case 1:ka(b.n!=null);c.bounds&&ka(Qp(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:ka(Sp(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&ka(Qp(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:ka(c.o!=null);b.bounds&&ka(Qp(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Rl(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};Sp=function(a,b,c){return b===c?!0:b&&c?Qp(b,c)&&a.component.ri(b.state,c.state):!1};
jmb=function(a,b,c,d,e,f){const g=d.type===0?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.yi);n<=h;n++)hmb(f,n*2),f.Mx(),f.s7b((p,q)=>{e.append(Pp(p,q,p,q))}),f.Cdb();f.yi<=h&&hmb(f,(h+1)*2);if(g==null)return{C$a:b}=imb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {C$a:k,UPb:l}=imb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);ka(d.type===0);return a.replace(d.n,void 0)}};
lmb=function(a,b){kmb(a,b.left,b.top);a.append(b)};imb=function(a,b){kmb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{C$a:!0,UPb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{C$a:!0,UPb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{C$a:!0,UPb:{right:c,bottom:d}};d=e}return{C$a:!1,UPb:void 0}};
kmb=function(a,b,c){c>a.Eea&&(a.buffer.splice(0,c-a.Eea),a.Eea=c,a.Zta=0);b>a.Zta&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.Zta),a.Zta=b)};mmb=function(a,b,c){c-=a.Eea;a=c===0?b-a.Zta:b;ka(c>=0&&a>=0);return{JFd:a,NFd:c}};nmb=function(a){const b=Kp.Og();a=a.yd();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(c.length*2);a.fA(c.length);break;case 1:b.expand(c.length*2);Gp(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
hmb=function(a,b){for(ka(b>=a.Ela);b>a.Ela;){var c=a.yd.head;ka(c!=null);c.type===0?(a.Mx(),a.Cdb()):(c=Math.min(c.length,b-a.Ela),Jp(a.yd,c),a.Ela+=c)}};omb=function(a,b){const c=new Rp,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);g==null||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.jc(g.value)},void 0)))}return a.domain.He({cells:c.build()})};
pmb=function(a,b){return c=>{const {left:d,top:e}=b.$md.get();return a.domain.He({cells:(new Rp).add(d,e,a.domain.update(void 0,c)).build()})}};Up=function(a,b,c,d){a.zk.set(b,new Tp(c,d));return a};rmb=function(a,b,c,d){a.zk.set(b,new qmb(c,d));return a};smb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
tmb=function(a,b){if(Kp.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:e.oldValue!=null&&c.add(e.oldValue);e.newValue!=null&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=Hp(b,c);return Og(a,e=>{switch(e.type){case 0:return new Tp(e.oldValue!=null?m(d.get(e.oldValue)):void 0,e.newValue!=null?m(d.get(e.newValue)):void 0);case 1:return new qmb(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};Vp=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};umb=function(a){ka(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};vmb=function(a){const b=new Map;for(const [c,d]of a)a=Vp(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};wmb=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=umb(c),e=Vp(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,Wp.from({start:f,end:g}))}if(a.size)throw Error();return b};
xmb=function(a){const b=Xp.Og();for(const [d,e]of a.Xe)switch(e.type){case "replace":var c=Vp(d);Up(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);Up(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=Vp(d);e.start&&rmb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&rmb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return Xp.He(a.axis,b.build().zk)};
Bmb=function(a){const b=new Map,c=new Map(a.zk);for(const [f,g]of c){const h=umb(f),k=Vp(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));ka(d.type===g.type);ka(e.type===g.type);ka(d.oldValue!=null===(e.oldValue!=null));ka(d.newValue!=null===(e.newValue!=null));c.delete(k.start);c.delete(k.end);b.set(h,new ymb(d.oldValue!=null&&e.oldValue!=null?Wp.from([d.oldValue,e.oldValue]):void 0,d.newValue!=null&&e.newValue!=null?Wp.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&ka(d.type===g.type);e&&ka(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new zmb(d?Yp.from(d):void 0,e?Yp.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return Amb.create(a.axis,b)};$p=function(a,b,c){const {x:d,y:e,...f}=a;ja(Kp.lk(d,Zp(b)));ja(Kp.lk(e,Zp(c)));return f};
Zp=function(a){const b=Kp.Og();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};Cmb=function(a,b){let c=a.items[b];c==null&&(c=a.items[b]={});return c};bq=function(a,b){if(b!=null)return m(a.xdd.get(b))};Dmb=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.AYa(d));d++);return c};
Emb=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.zYa(d));d++);return c};Fmb=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.AYa(d));d--);return c};Gmb=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.zYa(d));d--);return c};Hmb=function(a,b){const c=a.E5(b.Jg),d=a.C8(b.Qg),e=a.E5(b.qk||b.Jg);a=a.C8(b.rl||b.Qg);ja(c!=null&&d!=null&&e!=null&&a!=null);ja(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};Imb=function(...a){return b=>{for(const c of a){const d=c(b);if(d)return d}}};
Jmb=function(a){return b=>{const c=[];if(b==="")return{s:b,value:c};for(;;){const d=a(b);if(!d||d.s===b)return{s:b,value:c};c.push(...d.value);b=d.s}}};
Lmb=function(a){const b=a.ZQ,c=__c.cp({get:()=>b.cols.reduce((n,p)=>n+p.width,0),set:n=>{ka(n>0);n/=c.value;for(const p of b.cols)p.width*=n}}),d=__c.cp({get:()=>b.rows.reduce((n,p)=>n+p.height,0),set:n=>{ka(n>0);n/=d.value;for(const p of b.rows)p.height*=n,p.minHeight=p.height}}),e=bp(()=>{const n=new Map;for(const p of b.cols)n.set(p.id,p);return n}),f=bp(()=>{const n=new Map;for(const p of b.rows)n.set(p.id,p);return n}),g=Kmb(n=>b.rows.has(n)?(n=b.rows.ek(n))?g(n)+1:0:-1),h=Kmb(n=>b.cols.has(n)?
(n=b.cols.ek(n))?h(n)+1:0:-1),k=Kmb(n=>(n=b.cols.ek(n))?k(n)+n.width:0),l=Kmb(n=>(n=a.ZQ.rows.ek(n))?l(n)+n.height:0);return{attributes:{width:c,height:d},Rb:{layout:b,rows:b.rows,cols:b.cols,Dnb:n=>f.get().get(n),z$a:n=>e.get().get(n),S2a:n=>b.rows.ffc(n),PTa:n=>b.cols.ffc(n),F3:g,G0:h,Kc:k,Mc:l}}};cq=__webpack_require__(519427);Mmb=cq._isComputingDerivation;__c.Nmb=cq.comparer;bp=__c.bp=cq.computed;Omb=cq.createAtom;dq=cq.observable;Pmb=cq.ObservableMap;var Qmb,Kmb;Qmb=__webpack_require__(635872);__c.Rmb=Qmb.Om;Kmb=Qmb.kq;__c.Smb=__webpack_require__(497827).h;__c.Tmb=__webpack_require__(318386).U;__c.Umb=__webpack_require__(119930).xQ;__c.Vmb=__webpack_require__(481922).C;var Ymb,Zmb,anb,cnb;__c.Wmb=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;__c.Xmb=/^#[0-9a-f]{6}$/;Ymb=/^#[0-9a-f]{6}$|^transparent$/;Zmb=/^#[0-9a-f]{6}$|^inherit$/;__c.$mb=/^[0-9]+(\.[0-9]+)?$/;anb=/^[0-9]+(\.[0-9]+)?px$|^inherit$/;__c.bnb=/^-?[0-9]+(\.[0-9]+)?%$/;cnb=/^(([1-9]|10)( ([1-9]|10)){0,9})?$|^inherit$/;var dnb,enb;eq=__c.eq=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new dnb(this,a,b,c,d)}};
dnb=class extends eq{isIdentity(a){return this.component.isIdentity(this.A4(a))}compose(a,b){return this.sLa(this.component.compose(this.A4(a),this.A4(b)))}transform(a,b){a=this.component.transform(this.A4(a),this.A4(b));return vjb(a,c=>this.sLa(c))}Dl(a){return this.sLa(this.component.Dl(this.A4(a)))}lk(a,b){return a===b||this.component.lk(this.A4(a),this.A4(b))}identity(a){return this.sLa(this.component.identity(this.Jka(a)))}apply(a,b){const c=this.Jka(a);b=this.component.apply(c,this.A4(b));return c===
b?a:this.rib(b)}Rl(a,b){const c=this.Jka(a);b=this.component.Rl(c,this.A4(b));return c===b?a:this.rib(b)}ri(a,b){return a===b||this.component.ri(this.Jka(a),this.Jka(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.sLa=b;this.A4=c;this.rib=d;this.Jka=e}};xo=__c.xo=class{static Wr(){return new enb}constructor(a,b,c,d){this.ou=a;this.Pu=b;this.sva=c;this.PBa=d}};enb=class{build(a,b){return new xo(a,b,this.sva,this.PBa)}constructor(){this.PBa=this.sva=!1}};var fnb=class extends eq{isIdentity(){return!0}compose(){}transform(){return yo()}Dl(){}lk(){return!0}identity(){}apply(a){return a}Rl(a){return a}ri(a,b){return this.bx(a,b)}equals(a){return this===a}constructor(a){super();this.bx=a}};var zkb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},gnb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},hnb=class extends eq{update(a){return this.component.isIdentity(a)?void 0:new zkb(a)}replace(a,b){return new gnb(a,b)}isIdentity(a){return a==null||a.type===0&&this.component.isIdentity(a.delta)}compose(a,b){if(a==null)return b;if(b==null)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Rl(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return wo(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(a==null||b==null)return yo(b,a);switch(a.type){case 0:switch(b.type){case 0:return vjb(this.component.transform(a.delta,b.delta),c=>
this.update(c));case 1:return a=this.component.apply(b.oldState,a.delta),new xo(this.replace(a,b.newState),void 0,!1,!0);default:throw new r(b);}case 1:switch(b.type){case 0:return b=this.component.apply(a.oldState,b.delta),zo(this.replace(b,a.newState));case 1:return wo(this.component,a.oldState,b.oldState),zo(this.replace(b.newState,a.newState));default:throw new r(b);}default:throw new r(a);}}Dl(a){if(a==null)return a;switch(a.type){case 0:return this.update(this.component.Dl(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}lk(a,b){return a===b?!0:a==null||b==null?a===b:a.type===0&&b.type===0?this.component.lk(a.delta,b.delta):a.type===1&&b.type===1?this.component.ri(a.oldState,b.oldState)&&this.component.ri(a.newState,b.newState):!1}identity(){}apply(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return wo(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Rl(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.Rl(a,
b.delta);case 1:return wo(this.component,a,b.newState),b.oldState;default:throw new r(b);}}ri(a,b){return this.component.ri(a,b)}equals(a){return this===a||a instanceof hnb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var inb=class extends eq{isIdentity(a){return a==null||this.component.isIdentity(a)}compose(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.compose(a,b):void 0}transform(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.transform(a,b):yo(b,a)}Dl(a){return a!=null?this.component.Dl(a):void 0}lk(a,b){return a!=null&&b!=null&&this.component.lk(a,b)||a==null&&b==null}identity(a){return a!=null?this.component.identity(a):void 0}apply(a,b){ja(a==null===(b==null));return a!=
null&&b!=null?this.component.apply(a,b):void 0}Rl(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.Rl(a,b):void 0}ri(a,b){return a===b||a!=null&&b!=null&&this.component.ri(a,b)}equals(a){return this===a||a instanceof inb&&this.component.equals(a.component)}constructor(a){super();this.component=a;ja(!(a instanceof inb))}};var yjb={type:0,length:1},zjb={type:1,length:1},Bjb={type:2,length:1},Jjb=Co(),Ijb=Do(),Kjb=Do(new gnb),Gjb=class{toString(){return this.ops.map(Fjb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.TNa=d}},jnb=new Gjb([],0,0,0),knb=class{j9(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(Bo(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Ajb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(Cjb(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ja(b>=0,"{} < 0",b);b&&(this.j9(a),this.acc+=b);return this}CPb({Ph:a,zm:b}){const c=this.ops.length,d=this.s8||(this.s8=new Map),e=this.fBa||(this.fBa=new Map);ja(!d.has(a),"duplicate record: {}",a);ja(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.gsa(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.Ph===c.zm&&(c=void 0,a=Co(b)),b==null&&c==null))return this.expand();this.j9(a.type);c&&this.CPb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.Ph===c.zm&&(c=void 0,a=Do(b)),b==null){if(c==null)return this.retain()}else if(b.type===1&&b.oldState==null&&b.newState==null&&c==null)return this.gsa();this.j9(a.type);c&&this.CPb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return a==
null||typeof a==="number"?this.accumulate(0,a):this.append(Do(void 0,a))}expand(a){return a==null||typeof a==="number"?this.accumulate(1,a):this.append(Co(void 0,a))}gsa(a){return a==null||typeof a==="number"?this.accumulate(2,a):this.append(Do(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(Co(a,b))}update(a,b){return this.append(Do(a!=null?this.component.update(a):void 0,b))}x5a(a){return this.append(Do(this.component.replace(void 0,a)))}vY(a){return this.append(Do(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(Do(this.component.replace(a,b),c))}build(a){this.mode!==0&&this.j9();if(a&&a.hLc())return a.Pdc(this.ops);if(!this.s8&&!this.fBa)return new Gjb(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.s8);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.Ph),f=g.get(d.zm);if(e!==d.Ph||f!==d.zm)a[h]=Co(c.state,{Ph:e,zm:f});break;case 4:d=
c.shift;e=g.get(d.Ph);f=g.get(d.zm);if(e!==d.Ph||f!==d.zm)a[h]=Do(c.delta,{Ph:e,zm:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${Fjb(c)}`);default:throw new r(c);}}return new Gjb(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.fBa=this.s8=this.mode=void 0}},lnb=class{static create(a,b,c){ja(b>=0,"{} < 0",b);ja(c>=0,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,Bo(b)]:a.ops;return new lnb(a)}get head(){return this.Cm}ED(a,
b=1){const c=m(this.Cm);if(c.type!==a)throw Error();const d=c.length;ja(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Cm=Bo(d-b),Bo(b);case 1:return this.Cm=Ajb(d-b),Ajb(b);case 2:return this.Cm=Cjb(d-b),Cjb(b);default:throw new r(a);}else return this.Cm=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.Cm=a[this.i++]}},mnb=class{CPb(a,{Ph:b,zm:c}){const d=this.s8||(this.s8=new Map),e=this.fBa||(this.fBa=new Map);ka(!d.has(b),"already recorded: {}",b);ka(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.CPb(a,b):a!=null&&(this.list[this.length]=a);this.length++;return this}expand(a=1){ja(a>=0,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.s8||this.fBa){const c=m(this.s8);var b=m(this.fBa);po(c.size,b.size);for(const [d,e]of b)ka(c.has(d),"recall has no record: {}",d),b=c.get(d),b!=null&&(a[e]=b)}this.Z4c!=null&&po(this.length,this.Z4c);return a}constructor(a){this.Z4c=a;this.list=[];this.length=
0;this.fBa=this.s8=void 0}},nnb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new nnb(a)}finish(){po(this.Sxa,this.input.length)}constructor(a){this.input=a;this.Sxa=0}},onb=class{hLc(){return!!this.djb}Pdc(a){const b=new knb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.g6c(c));break;case 4:b.append(this.h6c(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.Mxc=this.Nxc=this.djb=
void 0}},pnb=class extends onb{g6c(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.C5a&&this.C5a.get(c.Ph);d=this.component.apply(b,d);const e=Sjb(this,c);return d!==b||e!==c?Co(d,e):a}h6c(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.C5a&&this.C5a.get(c.Ph);d=this.component.compose(b,d);const e=Sjb(this,c);return d!==b||e!==c?Do(d,e):a}constructor(...a){super(...a);this.C5a=void 0}},qnb=class extends onb{hLc(){return super.hLc()||!!this.KOa||!!this.tPa}g6c(a){if(!a.shift)return a;
const b=a.shift,c=Sjb(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}h6c(a){const b=a.delta,c=a.shift;var d=this.KOa;if(d){var e=d.get(a);if(e==null)e=a.delta;else{d.delete(a);d=m(this.tPa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&Sjb(this,c);return e!==b||d!==c?Do(e,d):a}Pdc(a){a=super.Pdc(a);if(this.KOa&&this.KOa.size)throw Error(`unconsumed setSurrogates: ${[...this.KOa.values()]}`);if(this.tPa&&this.tPa.size)throw Error(`unconsumed subSurrogates: ${[...this.tPa.keys()]}`);
return a}constructor(...a){super(...a);this.tPa=this.KOa=void 0}},rnb=class extends eq{Og(){return new knb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.Og(),e=new pnb(c),f=lnb.create(a,0,b.pre),g=lnb.create(Hjb(b,a.TNa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(k.type===1)d.append(g.ED(k.type,k.length));else if(k.type===3)d.append(Eo(g,k.type));else if(h)if(h.type===1)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.ED(h.type,l);g.ED(k.type,l);d.append(Ajb(l));break;case 4:l=Eo(f,h.type);k=Eo(g,k.type);h=k.shift;d.append(Co(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(h.type===3){l=Eo(f,h.type);k=Eo(g,k.type);h=l.shift;var n=k.shift;h==null?d.append(Co(c.apply(l.state,k.delta),n)):n==null?(d.append(l),
Fo(e,h.zm,k.delta)):(d.append(Co(l.state,{Ph:h.Ph,zm:n.zm})),Fo(e,h.zm,k.delta),Rjb(e,n.Ph,h.zm))}else h.type===4||k.type===4?(k=Eo(f,4),l=Eo(g,4),h=k.shift,n=l.shift,h==null?d.append(Do(c.compose(k.delta,l.delta),n)):n==null?(d.append(k),Fo(e,h.zm,l.delta)):(d.append(Do(k.delta,{Ph:h.Ph,zm:n.zm})),Fo(e,h.zm,l.delta),Rjb(e,n.Ph,h.zm))):(l=Math.min(h.length,k.length),h=f.ED(h.type,l),k=g.ED(k.type,l),d.append(h.type===2||k.type===2?Cjb(l):Bo(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return yo(b,a);const c=this.component,d=lnb.create(a,b.pre,0),e=lnb.create(Hjb(b,a.TNa),a.pre,0),f=this.Og(),g=this.Og(),h=xo.Wr(),k=new qnb(c),l=new qnb(c);for(var n=d.head,p=e.head;n||p;){if(n&&n.type===3)if(p=Eo(d,n.type),p.shift){var q=p.shift;n=Do();g.append(n,"nocollapse");f.append(p);Ho(k,q.zm,n);Go(k,q.Ph)}else g.append(yjb),f.append(p);else if(n&&n.type===1)p=d.ED(n.type,n.length),g.append(Bo(p.length)),f.append(p);
else if(p&&p.type===3)if(p=Eo(e,p.type),p.shift){n=p.shift;q=n.Ph;n=n.zm;var u=-q-1,w=Do(void 0,{Ph:-n-1,zm:n});g.append(p);f.append(w);Ho(l,n,w);Go(l,q);Qjb(l,u,q)}else g.append(p),f.append(yjb);else if(p&&p.type===1)q=e.ED(p.type,p.length),g.append(q),f.append(Bo(p.length));else if(n&&p)if(n.type===4||p.type===4){q=Eo(d,n.type);n=Eo(e,p.type);const {ou:x,Pu:z}=Ao(h,c.transform(q.delta,n.delta));p=q.shift;n=n.shift;if(p)if(n){q=n.Ph;n=n.zm;u=p.Ph;p=p.zm;w=-q-1;const B=Do(void 0,{Ph:-n-1,zm:n}),C=
Do(void 0,{Ph:q,zm:n});g.append(C);f.append(B);Ho(k,p,C);Ho(l,n,B);Go(k,u,x);Go(l,q,z);Qjb(l,w,u);Rjb(l,q,p)}else q=p.Ph,n=p.zm,u=Do(),g.append(u,"nocollapse"),f.append(Do(z,p)),Ho(k,n,u),Go(k,q,x);else n?(p=n.Ph,q=n.zm,u=-p-1,w=Do(void 0,{Ph:-q-1,zm:q}),g.append(Do(x,n)),f.append(w),Ho(l,q,w),Go(l,p,z),Qjb(l,u,p)):(g.append(Do(x)),f.append(Do(z)))}else q=Math.min(n.length,p.length),n=d.ED(n.type,q),p=e.ED(p.type,q),n.type===2&&p.type===2?g.append(Bo(p.length)):g.append(p),f.append(n);else throw Error(`length mismatch (${a} x ${b})`);
n=d.head;p=e.head}return h.build(g.build(k),f.build(l))}Dl(a){if(!a.ops.length)return a;const b=this.Og(),c=new pnb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.Dl(d.delta);const e=d.shift&&Tjb(d.shift);e?(b.retain(e),Fo(c,e.zm,a)):b.append(Do(a));break;case 3:a=d.shift&&Tjb(d.shift);d.state!=null?a?(b.retain(a),Fo(c,a.zm,this.component.replace(d.state,void 0))):b.vY(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}lk(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.qtc(a.ops[c],b.ops[c]))return!1;return!0}qtc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.ri(a.state,b.state)&&Ujb(a.shift,b.shift);case 4:return a.type===b.type&&this.component.lk(a.delta,b.delta)&&Ujb(a.shift,b.shift);default:throw new r(a);}}Xg(a){return new mnb(a)}identity(){return jnb}apply(a,
b){if(!b.ops.length)return a;const c=nnb.create(a,b.pre),d=new mnb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,Bo(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:Mjb(d,Ojb(c,e.length));break;case 1:d.expand(e.length);break;case 2:ka(Ljb(Ojb(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(Njb(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Rl(a,b){if(!b.ops.length)return a;
const {unshift:c,t$e:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=nnb.create(a,b.post),f=new mnb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,Bo(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:Mjb(f,Ojb(e,g.length));break;case 1:ka(Ljb(Ojb(e,g.length)));break;case 2:ka(Ljb(Ojb(e,g.length)));f.expand(g.length);break;case 3:wo(this.component,g.state,Njb(e));break;case 4:f.append(this.component.Rl(Njb(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.Og(),c=this.Og();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(Bo(d.length));c.append(d);break;case 4:d.shift?(b.retain(Tjb(d.shift)),c.append(Do(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(Tjb(d.shift)),c.append(Co(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),t$e:c.build()}}ri(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.ri(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof rnb&&this.component.equals(a.component)}constructor(a){super();this.component=new hnb(new inb(a))}};var Jo,Wjb,snb,Yjb,$jb,qkb,Zjb,xkb;Jo=Object.freeze({serialize:a=>a,deserialize:a=>a});fq=__c.fq=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});Wjb=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
snb=class{get serializer(){this.aQc==null&&(this.aQc=this.Lqe());return this.aQc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.Lqe=a}};Yjb=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
$jb=Object.freeze({serialize(a){let b=0,c=0;const d=__c.Vjb(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,Zj:e}},deserialize({items:a,Zj:b}){const c=[];let d=0;for(const e of b)e<0?d+=-e:e>0&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});qkb=class{serialize(a){return Og(a,b=>this.serializer.serialize(b))}deserialize(a){return Og(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Zjb=class{serialize(a){return Io(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return Io(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};xkb=class{serialize(a){return a!=null?this.serializer.serialize(a):void 0}deserialize(a){return a!=null?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new zkb(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new gnb(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var tnb,ekb,unb,vnb;tnb={next:()=>{},error:()=>{}};ekb=class{next(a){this.closed||this.o.next(this.f(a))}error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};unb=class{create(a,b=__c.Vmb,c=tnb){a=this.iA(a);b.subscribe(this.connect(a,c));return a}};
gq=__c.gq=class extends unb{map(a,b,c,d,e,f){return new vnb(this,a,b,c,d,e,f,Xjb({serialize:b,deserialize:a},this.w9b),Xjb({serialize:d,deserialize:c},this.Vsa))}constructor(a,b){super();this.w9b=a;this.Vsa=b}};
vnb=class extends gq{iA(a){return this.bEe(this.component.iA(this.Jka(a)))}connect(a,b){const c=this.component.connect(this.qVb(a),{next:d=>b.next(this.sLa(d)),error:d=>b.error(d)});return{next:d=>c.next(this.A4(d)),complete:()=>c.complete()}}jc(a){return this.rib(this.component.jc(this.qVb(a)))}destroy(a,b){return this.component.destroy(this.qVb(a),this.Jka(b))}fj(a,b){return this.component.fj(this.qVb(a),this.Jka(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.sLa=b;this.A4=
c;this.rib=d;this.Jka=e;this.bEe=f;this.qVb=g;this.domain=this.component.domain.map(this.sLa,this.A4,this.rib,this.Jka)}};hq=__c.hq=class{connect(a){ka(this.vL==null);this.vL=a;return{next:b=>{this.vL&&ckb(this,b)},complete:()=>this.complete()}}jc(){return this.CU()}complete(){this.vL&&(this.vL=void 0,dkb(this,"mutable disconnected"))}error(a){this.vL&&(this.vL.error(a),this.vL=void 0,dkb(this,"mutable failure"))}qr(a){var b;ckb(this,a);this.domain.isIdentity(a)||(b=this.vL)===null||b===void 0||b.next(a)}constructor(){this.clients=this.Qec=this.vL=void 0}};var wnb;iq=__c.iq=class{get(){this.SX.reportObserved();return this.value}set(a){__c.Nmb.identity(this.value,a)||(this.value=a,this.SX.reportChanged())}constructor(a){this.value=a;this.SX=Omb("")}};
wnb=class{static F(a){gb(a,{Uyc:bp,H6b:bp})}get Jq(){return this.cols.length}get VA(){return this.rows.length}get Uyc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get H6b(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.G_(a,b));c==null&&Mmb()&&(c=new iq,this.values.set(this.G_(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];d==null&&(d=this.rows[a]=this.Gjd++);a=this.cols[b];
a==null&&(a=this.cols[b]=this.Ejd++);(b=this.values.get(this.G_(d,a)))?b.set(c):this.values.set(this.G_(d,a),new iq(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.G_(a,b));c&&c.set(void 0);this.values.delete(this.G_(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.G_(c,d));b!=null&&(b=b.get(),b!=null&&a(b,c,d))}}G_(a,b){return`${a}:${b}`}constructor(){this.Gjd=(wnb.F(this),0);this.Ejd=0;this.rows=dq.array([],
{deep:!1});this.cols=dq.array([],{deep:!1});this.values=new Map}};var xnb,mkb,nkb,lkb,okb,pkb,ynb,skb,tkb,wkb,ukb,Bnb,Dnb,Enb,Fnb;Vo=__c.Vo=class{constructor(a){this.serializer=a}};xnb=class extends Vo{bx(a,b){return a===b}stringify(a){return JSON.stringify(a)}};mkb=class extends xnb{zP(a){return a===this.value}constructor(a){super(Jo);this.value=a}};nkb=class extends xnb{zP(a){return this.values.has(a)}constructor(a){super(Jo);this.values=a}};lkb=class extends xnb{constructor(a){super(Jo);this.zP=a}};
okb=class extends Vo{zP(a){return a.every(b=>this.type.zP(b))&&(!this.S7a||this.S7a(a))}bx(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.bx(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.S7a=b}};
pkb=class extends Vo{zP(a){return[...a].every(this.Gye)}bx(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),a==null||!this.valueType.bx(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.Gye=([d,e])=>ynb.every(f=>!d.includes(f))&&this.keyType.zP(d)&&this.valueType.zP(e)}};ynb=["$",".","\x00"];
skb=class extends Vo{zP(a){return this.keys.every(b=>this.fields[b].zP(a[b]))&&(!this.S7a||this.S7a(a))}bx(a,b){return this.keys.every(c=>this.fields[c].bx(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(fq);this.fields=a;this.S7a=b;this.keys=Object.keys(this.fields)}};
tkb=class extends Vo{zP(a){return this.xM[this.EAb(a)].zP(a)}bx(a,b){const c=this.EAb(a),d=this.EAb(b);return c===d&&this.xM[c].bx(a,b)}stringify(a){return this.xM[this.EAb(a)].stringify(a)}constructor(a,b){super(fq);this.xM=a;this.EAb=b}};wkb=class extends Vo{zP(a){return a==null||this.type.zP(a)}bx(a,b){return a!=null?b!=null&&this.type.bx(a,b):b==null}stringify(a){return a!=null?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
ukb=class extends xnb{zP(a){return typeof a==="string"&&this.bVe.test(a)}constructor(a){super(Jo);this.bVe=a}};jq=__c.jq=Oo(a=>typeof a==="boolean");kq=__c.kq=Oo(a=>typeof a==="string");__c.znb=Oo(a=>a.length===1);__c.Anb=vkb(-2147483648,2147483647);Bnb=Oo(a=>Number.isSafeInteger(a));lq=__c.lq=vkb(0,2147483647);__c.Cnb=vkb(1,2147483647);mq=__c.mq=vkb(0,Number.MAX_SAFE_INTEGER);nq=__c.nq=Oo(a=>Number.isFinite(a));oq=__c.oq=Uo(0,Number.MAX_VALUE);Dnb=Oo(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
Enb=Qo(oq);Fnb=Qo(kq);var Gnb,ykb;Gnb={next:a=>ja(a==null),complete:()=>{}};
ykb=class extends gq{iA(a){return a!=null?this.type.iA(a):void 0}connect(a,b){if(a==null)return Gnb;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}jc(a){return a!=null?this.type.jc(a):void 0}destroy(a,b){if(a!=null&&b!=null)this.type.destroy(a,b);else if(a!=null||b!=null)throw Error(`${this.jc(a)} != ${b}`);}fj(a,b){return a!=null?b!=null&&this.type.fj(a,b):b==null}constructor(a,b,c){super(b,c);this.type=a;this.domain=new inb(this.type.domain)}};__c.pq=Wo(kq);
__c.Hnb=Wo(jq);Wo(__c.Anb);Wo(Bnb);__c.qq=Wo(nq);__c.Inb=Wo(lq);__c.Jnb=Wo(mq);__c.Knb=Wo(oq);var Lnb,Bkb,Mnb,Ckb,Nnb;Lnb=class extends hq{N_(a){if(a!=null)switch(a.type){case 1:ja(this.yEd.bx(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:ja(a.delta==null);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){jkb(this.yEd,a);const b=this._value.get();this.qr(this.domain.replace(b,a))}CU(){return this.value}constructor(a,b,c){super();this.yEd=a;this.domain=b;this._value=new iq(c)}};
Bkb=class extends gq{iA(a){a=jkb(this.type,a);return new Lnb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){kkb(this.type,a.value,b)}fj(a,b){this.type.bx(a.value,b)||(a.value=b);return!0}constructor(a,b){super(fq,b);this.type=a;this.domain=new hnb(new fnb((c,d)=>this.type.bx(c,d)))}};
Mnb=class extends hq{instantiate(a){const b=Lo(this,Akb),{mutable:c,Gx:d}=Mo(this.type,a,b);this.pvb.set(c);this.jQa=d;this.Zdb=b}destroy(a){No(this.type,a,this.jQa,this.pvb.get())}N_(a){if(a!=null)switch(a.type){case 0:this.jQa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}CU(){return this.type.jc(this.ref)}get ref(){return this.pvb.get()}set(a){this.qr(new gnb(this.type.jc(this.pvb.get()),a))}constructor(a,b,c){super();this.type=a;
this.domain=b;a=Lo(this,Akb);const {mutable:d,Gx:e}=Mo(this.type,c,a);this.pvb=new iq(d);this.jQa=e;this.Zdb=a}};Ckb=class extends gq{iA(a){return new Mnb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){this.type.destroy(a.ref,b)}fj(a,b){this.type.fj(a.ref,b)||a.set(b);return!0}constructor(a,b){super(fq,b);this.type=a;this.domain=new hnb(this.type.domain)}};__c.rq=Xo(kq);sq=__c.sq=Xo(jq);__c.tq=Xo(nq);__c.uq=Xo(lq);__c.vq=Xo(oq);Nnb=Xo(Dnb);__c.Onb=Xo(Enb);
__c.wq=Xo(Fnb);__c.xq=Zo(kq);__c.Pnb=Zo(jq);__c.yq=Zo(nq);__c.Qnb=Zo(lq);__c.zq=Zo(oq);var Dkb=new Map,Rnb=class extends eq{create(a,b){return Ekb(this,a,this.component.replace(void 0,b))}update(a,b){return Ekb(this,a,this.component.update(b))}replace(a,b,c){return Ekb(this,a,this.component.replace(b,c))}delete(a,b){return Ekb(this,a,this.component.replace(b,void 0))}identity(){return Dkb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}Dl(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.Dl(d),a!=null&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of Fkb(a,b)){const e=this.component.compose(a.get(d),b.get(d));e!=null&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return yo(b,a);const c=new Map,d=new Map,e=xo.Wr();for(const f of Fkb(a,b)){const g=Ao(e,this.component.transform(a.get(f),b.get(f)));g.Pu!=null&&c.set(f,g.Pu);g.ou!=null&&d.set(f,g.ou)}return e.build(d,c)}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),
d);d!=null?c.set(e,d):c.delete(e)});return c}Rl(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Rl(a.get(e),d);d!=null?c.set(e,d):c.delete(e)});return c}ri(a,b){return a===b||a.size===b.size&&Array.from(Fkb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.ri(d,c)})}lk(a,b){return a===b||a.size===b.size&&Array.from(Fkb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.lk(d,c)})}equals(a){return this===
a||a instanceof Rnb&&this.component.equals(a)}constructor(a){super();this.component=new hnb(new inb(a))}};__c.Snb=class extends hq{static F(a){gb(a,{refs:dq.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=c!=null?this.domain.replace(a,this.type.jc(c),b):this.domain.create(a,b);this.qr(c);c=this.get(a);if(c==null)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);b!=null&&(a=this.domain.delete(a,this.type.jc(b)),this.qr(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,
c])=>a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}[Symbol.iterator](){return this.refs[Symbol.iterator]()}CU(){return Og(this.refs,a=>this.type.jc(a))}destroy(a){ja(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.AGa.get(c));No(this.type,d,c.to,b)})}fj(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);this.type.fj(c,d)||this.set(b,d)}else this.delete(b);
for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}N_(a){a.forEach((b,c)=>{if(b!=null)switch(b.type){case 0:b.delta!=null&&m(this.AGa.get(c)).to.next(b.delta);break;case 1:b.oldState!=null?(this.G9b(c,b.oldState),this.refs.delete(c),this.AGa.delete(c)):(ja(!this.refs.has(c)),ja(!this.AGa.has(c)));if(b.newState!=null){const {EYc:d,value:e}=Gkb(this,c,b.newState);this.refs.set(c,e);this.AGa.set(c,d)}break;default:throw new r(b);}})}G9b(a,b){const c=m(this.refs.get(a));a=m(this.AGa.get(a));
No(this.type,b,a.to,c)}constructor(a,b,c){super();this.type=a;this.domain=b;this.refs=(__c.Snb.F(this),new Map);this.AGa=new Map;c.forEach((d,e)=>{const {EYc:f,value:g}=Gkb(this,e,d);this.refs.set(e,g);this.AGa.set(e,f)})}};__c.Snb.prototype.QF=da(93);
var Hkb=class extends gq{iA(a){return new __c.Snb(this.type,this.domain,a)}xn(a){return a}connect(a,b){return this.xn(a).connect(b)}jc(a){return this.xn(a).jc()}destroy(a,b){return this.xn(a).destroy(b)}fj(a,b){return this.xn(a).fj(b)}constructor(a,b){super(fq,b);this.type=a;this.domain=new Rnb(this.type.domain)}};var Tnb={next:()=>{},complete:()=>{}},Ikb=class extends gq{iA(a){return jkb(this.type,a)}connect(){return Tnb}jc(a){return a}destroy(a,b){kkb(this.type,a,b)}fj(a,b){return this.type.bx(a,b)}constructor(a,b){super(Jo,b);this.type=a;this.domain=new fnb((c,d)=>this.type.bx(c,d))}};var Kkb=class extends eq{static of(a){return new Kkb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>c==null||this.components[b].isIdentity(c))}Dl(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];d!=null&&(c=this.components[e],d=c.Dl(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];e!=null&&g!=null?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):e!=null?c[f]=e:g!=null&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return yo(b,a);const g=xo.Wr();for(const h of new Set([...e,...f])){f=a[h];const k=b[h];f!=null&&k!=null?(e=this.components[h],f=Ao(g,e.transform(f,k)),e.isIdentity(f.Pu)||(c[h]=f.Pu),e.isIdentity(f.ou)||
(d[h]=f.ou)):f!=null?c[h]=f:k!=null&&(d[h]=k)}return g.build(d,c)}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].apply(a[e],c));return d}Rl(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].Rl(a[e],c));return d}ri(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].ri(a[c],b[c]))}lk(a,b){if(a===b)return!0;
const c=Object.keys(a),d=Object.keys(b);return!c.length&&!d.length||__c.go([...c,...d]).every(e=>{const f=a[e],g=b[e];return f!=null&&g!=null&&this.components[e].lk(f,g)})}equals(a){return this===a?!0:a instanceof Kkb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var Jkb,Vnb;Jkb=class{get value(){return this.computed.get()}set value(a){this.computed.set(a)}constructor(a){this.computed=a}};
__c.Unb=class extends hq{CU(){const a=this.tea,b=this.Smb,c=this.JSa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].jc(this.Rb[e]);for(const e in c)d[e]=c[e].jc(this.attributes[e]);return d}destroy(a){const b=this.tea,c=this.Smb,d=this.JSa,e=this.J0c;for(const f in b)kkb(b[f],this.values[f],a[f]);for(const f in c)No(c[f],a[f],this.Nrd[f],this.Rb[f]);for(const f in d)No(d[f],a[f],this.QSc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}fj(a){const b=this.tea,c=
this.Smb,d=this.JSa;for(const e in b)if(!b[e].bx(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].fj(this.Rb[e],a[e]))return!1;for(const e in d)if(!d[e].fj(this.attributes[e],a[e]))return!1;return!0}N_(a){for(const b in a)a[b]!=null&&(b in this.Smb?this.Nrd[b].next(a[b]):b in this.JSa&&this.QSc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.tea=b;this.Smb=c;this.JSa=d;this.J0c=void 0;
this.values=Io(b,(g,h)=>jkb(g,f[h]));a=Io(c,(g,h)=>{const k=Nkb(this,h),{Gx:l,mutable:n}=Mo(g,f[h],k);return{ref:n,jQa:l,Zdb:k}});this.Rb=Io(a,g=>g.ref);this.Nrd=Io(a,g=>g.jQa);Io(a,g=>g.Zdb);d=Io(d,(g,h)=>{const k=Okb(this,h),{Gx:l,mutable:n}=Mo(g,f[h],k);return{ref:n,jQa:l,Zdb:k}});this.attributes=Io(d,g=>g.ref);this.QSc=Io(d,g=>g.jQa);Io(d,g=>g.Zdb);if(e){const {Rb:g,attributes:h,Lia:k}=e.create({...this.values,...this.Rb,...this.attributes});this.UXc=Io(e.Rb,(l,n)=>g[n]);this.g7b=Io(e.attributes,
(l,n)=>h[n]);this.J0c=k}else this.UXc={},this.g7b={}}};__c.Unb.prototype.aQ=da(95);Aq=__c.Aq=Symbol("$impl");Vnb=class extends gq{};
__c.Wnb=class extends Vnb{iA(a){a=new __c.Unb(this.domain,this.values,this.Rb,this.attributes,this.computed,a);const b={...a.values,...a.Rb,...a.UXc};Object.defineProperties(b,this.yTe);Object.defineProperty(b,Aq,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[Aq].connect(b)}jc(a){return a[Aq].jc()}destroy(a,b){a[Aq].destroy(b)}fj(a,b){return a[Aq].fj(b)}Ai({values:a={},Rb:b={},attributes:c={},computed:d}){return new __c.Wnb({...this.values,...a},{...this.Rb,...b},{...this.attributes,
...c},Pkb(this.computed,d))}constructor(a,b,c,d){super(fq,fq);this.values=a;this.Rb=b;this.attributes=c;this.computed=d;this.domain=Lkb(Io(this.values,e=>new fnb((f,g)=>e.bx(f,g))),Io(this.Rb,e=>e.domain),Io(this.attributes,e=>e.domain));Mkb(a,{...b,...(d===null||d===void 0?void 0:d.Rb)},{...c,...(d===null||d===void 0?void 0:d.attributes)});a=Io(c,(e,f)=>({enumerable:!0,get(){return this[Aq].getAttribute(f)},set(g){this[Aq].setAttribute(f,g)}}));d=Io((d===null||d===void 0?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[Aq].g7b[f].value},set(g){this[Aq].g7b[f].value=g}}));this.yTe={...a,...d}}};__c.Wnb.prototype.aQ=da(94);var Qkb=new __c.Wnb({},{},{});var Xnb=class extends eq{dL(a){return a}isIdentity(a){return a===0}compose(a,b){return a+b}transform(a,b){return yo(b,a)}lk(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Rl(a,b){return a-b}ri(a,b){return a===b}},Ynb=class extends Xnb{Dl(a){return 0-a}equals(a){return this===a||a instanceof Ynb}},Znb=class extends Xnb{dL(a){ja(a>=0);return super.dL(a)}compose(a,b){ja(a>=0);ja(b>=0);return super.compose(a,b)}transform(a,b){ja(a>=0);ja(b>=0);return super.transform(a,b)}Dl(a){ja(a>=0);return 0}apply(a,
b){ja(b>=0);return super.apply(a,b)}Rl(a,b){ja(b>=0);return super.Rl(a,b)}equals(a){return this===a||a instanceof Znb}},$nb=new Ynb,aob=new Znb;var bob=class extends hq{N_(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}dL(a){this.qr(this.domain.dL(a))}CU(){return this.value}constructor(a,b){super();this.domain=a;this._value=new iq(b)}},cob=class extends gq{iA(a){return new bob(this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){wo(this.domain,a.value,b)}fj(a,b){a.dL(b-a.value);return!0}},dob=class extends cob{constructor(){super(Jo,Jo);this.domain=$nb}},eob=class extends cob{fj(a,
b){return b<a.value?!1:super.fj(a,b)}constructor(){super(Jo,Jo);this.domain=aob}};new dob;new eob;__c.Bq=class{static F(a){gb(a,{empty:bp})}get empty(){return this.first()==null}count(){return this.reduce(a=>a+1,0)}toArray(){return this.base.filter(this.predicate)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){const b=this.predicate;return this.base.first(c=>b(c)&&(!a||a(c)))}last(a){const b=this.predicate;return this.base.last(c=>b(c)&&(!a||a(c)))}next(a,b){ja(this.has(a));const c=this.predicate;return this.base.next(a,d=>c(d)&&(!b||b(d)))}ek(a,b){ja(this.has(a));const c=
this.predicate;return this.base.ek(a,d=>c(d)&&(!b||b(d)))}yr(a,b){const c=this.predicate;ja(c(a));ja(c(b));return this.base.yr(a,b)}has(a){const b=this.predicate;return b(a)&&this.base.has(a)}map(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(a(d,e))});return c}flatMap(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(...a(d,e))});return c}filter(a){const b=this.predicate;return this.base.filter((c,d)=>b(c)&&a(c,d))}forEach(a){const b=this.predicate;this.base.forEach((c,
d)=>b(c)&&a(c,d))}reduce(a,b){const c=this.predicate;return this.base.reduce((d,e)=>c(e)?a(d,e):d,b)}some(a){const b=this.predicate;return this.base.some(c=>b(c)&&a(c))}every(a){const b=this.predicate;return this.base.every(c=>b(c)&&a(c))}constructor(a,b){this.base=a;this.predicate=b;__c.Bq.F(this)}};__c.Bq.prototype.t6=da(103);__c.Bq.prototype.TY=da(99);__c.Bq.prototype.QF=da(92);__c.Cq=class{get values(){return this.list.get()}get empty(){return this.values.empty}count(){return this.values.count()}toArray(){return this.values.toArray()}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){return this.values.first(a)}last(a){return this.values.last(a)}next(a,b){return this.values.next(a,b)}ek(a,b){return this.values.ek(a,b)}yr(a,b){return this.values.yr(a,b)}has(a){return this.values.has(a)}set(a,b){return this.values.set(a,b)}replace(a,b){return this.values.replace(a,
b)}append(a){return this.values.append(a)}prepend(a){return this.values.prepend(a)}lKa(a,b){return this.values.lKa(a,b)}insertBefore(a,b){return this.values.insertBefore(a,b)}delete(a){return this.values.delete(a)}map(a){return this.values.map(a)}flatMap(a){return this.values.flatMap(a)}filter(a){return this.values.filter(a)}forEach(a){return this.values.forEach(a)}reduce(a,b){return this.values.reduce(a,b)}some(a){return this.values.some(a)}every(a){return this.values.every(a)}constructor(a){this.list=
a}};__c.aa=__c.Cq.prototype;__c.aa.oL=da(112);__c.aa.Z0=da(107);__c.aa.t6=da(102);__c.aa.TY=da(98);__c.aa.QF=da(91);__c.Dq=class extends hq{static F(a){gb(a,{kP:bp,Qq:bp,empty:bp,JIa:bp,$Ka:bp})}ZLa(a){const b=Lo(this,e=>ep(this).retain(this.PG(c)).update(e).build()),{mutable:c,Gx:d}=Mo(this.type,a,b);return{id:String(this.iLb++),value:c,to:d,from:b}}F9b(a,b){No(this.type,a,b.to,b.value)}get kP(){const a=new Map;this.RK.forEach((b,c)=>b&&a.set(b.value,c));return a}get Qq(){return this.RK.filter(__c.Ra)}get(a){return(a=this.RK[a])&&a.value}ffc(a){return(a=this.Qq[a])&&a.value}PG(a){return m(this.kP.get(a),"ref not found")}N_(a){const b=
this.RK,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,g!=null?this.ZLa(g):void 0);h&&(d.set(h.Ph,b[e]),c.set(h.zm,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;h!=null&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;h==null?ka(b[e]==null):this.F9b(h,m(b[e]));b[e]=k!=
null?this.ZLa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.Ph,b[e]),c.set(g.zm,e));e++;break;default:throw new r(f);}ka(d.size===a.TNa);ka(c.size===a.TNa);for(e=0;e<a.TNa;e++)ka(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&b[b.length-1]==null;)b.length--}CU(){const a=[];this.RK.forEach((b,c)=>{b!=null&&(a[c]=this.type.jc(b.value))});return a}destroy(a){let b=0;this.RK.forEach((d,e)=>{d!=null&&(ja(e in a),this.type.destroy(d.value,a[e]),b++)});const c=a.reduce(d=>d+1,0);ja(b===c)}fj(a){const b=
this.RK,c=ep(this);for(let e=0;e<b.length;e++){const f=b[e];f!=null&&a[e]!=null&&this.type.fj(f.value,a[e])||f==null&&a[e]==null?c.retain():c.change(f&&this.type.jc(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.qr(c.build());return!0}get empty(){return!this.Qq.length}count(){return this.Qq.length}toArray(){return this.Qq.map(a=>a.value)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}get JIa(){const a=
this.Qq[0];return a&&a.value}get $Ka(){const a=this.Qq[this.Qq.length-1];return a&&a.value}first(a){if(!a)return this.JIa;const b=this.Qq.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.$Ka;const b=this.Qq;for(let c=b.length-1;c>=0;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.RK;for(a=this.PG(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}ek(a,b){const c=this.RK;for(a=this.PG(a)-1;a>=0;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}yr(a,
b){a=this.kP.get(a);b=this.kP.get(b);ja(a!=null);ja(b!=null);return a<b?-1:a>b?1:0}has(a){return this.kP.has(a)}insertAt(a,b){this.qr(ep(this).retain(a).insert(b).build());return this.RK[a].value}set(a,b){var c;ja(a>=0);a>=this.RK.length&&(this.RK.length=a+1);const d=(c=this.RK[a])===null||c===void 0?void 0:c.value;c=d!=null?this.type.jc(d):void 0;this.qr(ep(this).retain(a).change(c,b).build());return this.RK[a].value}replace(a,b){a=this.PG(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,
a)}prepend(a){return this.lKa(void 0,a)}lKa(a,b){return this.insertAt(a?this.PG(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.PG(a):this.RK.length,b)}delete(a){a=ep(this).retain(this.PG(a)).vY(this.type.jc(a)).build();this.qr(a)}moveTo(a,b){const c=this.PG(b);if(c===a)return b;this.qr(c<a?ep(this).retain(c).retain({Ph:0,zm:1}).retain(a-c-1).expand({Ph:1,zm:0}).build():ep(this).retain(a).expand({Ph:0,zm:1}).retain(c-a).retain({Ph:1,zm:0}).build());return b}map(a){return this.Qq.map(({value:b,
id:c})=>a(b,c))}flatMap(a){return this.Qq.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.Qq.filter(b=>a(b.value,b.id)).map(b=>b.value)}forEach(a){this.Qq.forEach(b=>b!=null&&a(b.value,b.id))}reduce(a,b){return this.Qq.reduce((c,d)=>a(c,d.value,d.id),b)}some(a){return this.Qq.some(b=>a(b.value,b.id))}every(a){return this.Qq.every(b=>a(b.value,b.id))}constructor(a,b,c){super();this.type=a;this.domain=b;this.RK=(__c.Dq.F(this),void 0);this.iLb=0;ja(!c.length||c[c.length-1]!=null);this.RK=dq.array([...c.map(d=>
this.ZLa(d))],{deep:!1})}};__c.aa=__c.Dq.prototype;__c.aa.oL=da(111);__c.aa.Z0=da(106);__c.aa.t6=da(101);__c.aa.TY=da(97);__c.aa.QF=da(90);__c.Rkb=class extends gq{Og(){return this.domain.Og()}xn(a){return a}iA(a){return new __c.Dq(this.type,this.domain,a)}connect(a,b){return this.xn(a).connect(b)}jc(a){return this.xn(a).jc()}destroy(a,b){this.xn(a).destroy(b)}fj(a,b){return this.xn(a).fj(b)}constructor(a,b){super(fq,b);this.type=a;this.domain=new rnb(this.type.domain)}};__c.Rkb.prototype.gB=da(114);__c.Eq=class{get empty(){return this.list.empty}count(){return this.list.count()}toArray(){return this.list.toArray()}first(a){return this.list.first(a)}last(a){return this.list.last(a)}next(a,b){return this.list.next(a,b)}ek(a,b){return this.list.ek(a,b)}yr(a,b){return this.list.yr(a,b)}has(a){return this.list.has(a)}map(a){return this.list.map(a)}flatMap(a){return this.list.flatMap(a)}filter(a){return this.list.filter(a)}forEach(a){this.list.forEach(a)}reduce(a,b){return this.list.reduce(a,b)}some(a){return this.list.some(a)}every(a){return this.list.every(a)}[Symbol.iterator](){return this.list[Symbol.iterator]()}set(){return hp()}replace(){return hp()}lKa(){return hp()}insertBefore(){return hp()}append(){return hp()}prepend(){return hp()}delete(){return hp()}constructor(a){this.list=
a}};__c.aa=__c.Eq.prototype;__c.aa.oL=da(110);__c.aa.Z0=da(105);__c.aa.t6=da(100);__c.aa.TY=da(96);__c.aa.QF=da(89);var fob;fob=class extends eq{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}Dl(a){throw new r(a);}lk(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Rl(a){throw new r(a);}ri(a){throw new r(a);}equals(a){return this===a||a instanceof fob}};__c.gob=new fob;var hob,iob,mob,nob,oob,pob,Iq,rob,sob,qob;hob=class{};Fq=__c.Fq=class extends hob{get length(){return this.state.length}mWb(a){Skb(this,a);return this.state.charAt(a)}ET(a){Tkb(this,a);return[new Fq(this.state.substring(0,a)),new Fq(this.state.substring(a))]}IJ(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;ja(!!a)}};
lp=__c.lp=class extends hob{get length(){return 1}mWb(a){Skb(this,a);return this.state}ET(a){Tkb(this,a);throw Error();}IJ(a){return new lp(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
Gq=__c.Gq=class extends hob{get length(){return this.state}mWb(a){Skb(this,a)}ET(a){Tkb(this,a);return[new Gq(a),new Gq(this.state-a)]}IJ(){return this}toString(){return this.state<=7?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;ja(!!a)}};
__c.Hq=class{get length(){return this.Oma+this.Er+this.uFc}yd(a){return new iob(this,a)}cursor(a,b){return new __c.job(this,a,b)}IJ(a){const b=this.KA.map(c=>c.IJ(a));return new __c.Hq(b,this.Oma,this.Er,this.uFc)}ib(){return this.KA.map(a=>a.type===0?a.state:"").join("")}forEach(a,b){for(const c of this.KA)switch(c.type){case 0:b.ib&&b.ib(c.state);break;case 1:b.item(c.state);break;case 2:b.Zj&&b.Zj(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.Zj&&b.Zj(a)}map(a,b){const c=
this.KA.map(d=>{switch(d.type){case 0:return b.ib(d.state);case 1:return b.item(d.state);case 2:return b.Zj(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.Zj(a));return c}reduce(a,b){return this.KA.reduce((c,d)=>{switch(d.type){case 0:return a.ib(c,d.state);case 1:return a.item(c,d.state);case 2:return a.Zj?a.Zj(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.kob;
const d=new __c.lob;c=this.cursor(b);c.DS(a);c.DS(b-a,{item:e=>d.item(e),ib:e=>d.xf(e),Zj:e=>d.s9(e)});return d.build()}toString(){return this.KA.join("")}constructor(a,b,c,d){this.KA=a;this.Oma=b;this.Er=c;this.uFc=d;a=a.length?a[a.length-1]:void 0;ja(!a||a.type!==2)}};__c.Hq.prototype.vIb=da(115);__c.kob=new __c.Hq([],0,0,0);
__c.lob=class{lka(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(this.mode!=null){switch(this.mode){case 0:this.KA.push(new Fq(this.Xmb));this.$xb+=this.Xmb.length;this.Xmb="";break;case 2:this.KA.push(new Gq(this.Ymb));this.PUb+=this.Ymb;this.Ymb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.xf(a.state);case 1:return this.item(a.state);case 2:return this.s9(a.state);default:throw new r(a);}}xf(a){a&&(this.lka(0),this.Xmb+=a);return this}item(a){this.flush();
this.KA.push(new lp(a));this.tlc++;return this}s9(a){a>0&&(this.lka(2),this.Ymb+=a);return this}append(a,b=0){a.forEach(b,{ib:c=>this.xf(c),item:c=>this.item(c),Zj:c=>this.s9(c)});return this}get length(){return this.$xb+this.tlc+this.PUb}build(){this.mode!==2&&this.flush();return this.length?new __c.Hq(this.KA,this.$xb,this.tlc,this.PUb):__c.kob}constructor(){this.KA=[];this.mode=void 0;this.Xmb="";this.PUb=this.tlc=this.$xb=this.Ymb=0}};
iob=class{get head(){return this.Cm}get prevValue(){return this.dmb&&this.dmb.mWb(this.dmb.length-1)}zo(a){const b=m(this.Cm),c=b.length;ja(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.ET(a),this.Cm=a[1],this.dmb=a[0];this.Cm=this.KA[this.i++];return this.dmb=b}finish(){ka(this.Cm==null,"unconsumed reader head: {}",this.Cm)}constructor(a,b=0){this.i=0;this.dmb=void 0;this.KA=(b=Math.max(0,b-a.length))?[...a.KA,new Gq(b)]:a.KA;this.Cm=this.KA.length?this.KA[this.i++]:void 0}};
__c.job=class{get prevValue(){return this.yd.prevValue}move(a,b,c){for(c=__c.Ukb(this.wib,c);a;){var d=this.yd.head;if(d)switch(d=this.yd.zo(b||d.type!==2?Math.min(d.length,a):d.length),d.type){case 0:c&&c.ib&&c.ib(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.Zj&&c.Zj(d.state);b&&(a-=d.length);break;default:throw new r(d);}else ja(b,"not enough characters or items: {}",a),c&&c.Zj&&c.Zj(a),a-=a}}DS(a,b){this.move(a,!0,b)}Yn(a,b){this.move(a,!1,b)}finish(){this.yd.finish()}constructor(a,
b,c){this.wib=c;this.yd=a.yd(b)}};__c.job.prototype.PLa=da(116);__c.job.prototype.oL=da(109);mob=class{};nob=class extends mob{get jca(){return this.length}get P2(){return this.length}XSb(a){Vkb(this,a);return this.ET(a)}WSb(a){Wkb(this,a);return this.ET(a)}ET(a){return[new nob(a),new nob(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
oob=class extends mob{get jca(){return 1}get P2(){return 1}XSb(a){Vkb(this,a);throw Error();}WSb(a){Wkb(this,a);throw Error();}map(a){return new oob(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
pob=class extends mob{get jca(){return 0}get P2(){return this.state.length}XSb(a){Vkb(this,a);throw Error();}WSb(a){Wkb(this,a);const [b,c]=this.state.ET(a);return[new pob(b),new pob(c)]}map(a,b){return new pob(this.state.IJ(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
Iq=class extends mob{get jca(){return this.oldState.length}get P2(){return this.newState.length}XSb(a){Vkb(this,a);return this.ET(a)}WSb(a){Wkb(this,a);return this.ET(a)}ET(a){const [b,c]=this.oldState.ET(a),[d,e]=this.newState.ET(a);return[new Iq(b,d),new Iq(c,e)]}map(a,b){return new Iq(this.oldState.IJ(b),this.newState.IJ(b))}toString(){return this.oldState.type===2?this.newState.type===2?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:this.newState.type===2?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;po(a.length,b.length)}};
rob=class{yd(a,b){return new qob(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}IJ(a,b){const c=this.ops.map(d=>d.map(a,b));return new rob(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};sob=new rob([],0,0);
__c.tob=class{lka(a,b,c){if(this.b3!==a||this.hqc!==b||this.Bpc!==c)switch(this.flush(),this.b3=a,this.hqc=b,this.Bpc=c,a){case 0:break;case 2:c===0&&(this.sZ="");break;case 3:b===0&&(this.Sza="");c===0&&(this.sZ="");break;default:throw new r(a);}}flush(){if(this.b3!=null){switch(this.b3){case 0:this.push(new nob(this.acc));this.acc=0;break;case 2:var a=this.sZ!=null?new Fq(this.sZ):new Gq(this.acc);this.push(new pob(a));this.sZ=void 0;this.acc=0;break;case 3:a=this.Sza!=null?new Fq(this.Sza):new Gq(this.acc);
const b=this.sZ!=null?new Fq(this.sZ):new Gq(this.acc);this.push(new Iq(a,b));this.sZ=this.Sza=void 0;this.acc=0;break;default:throw new r(this.b3);}this.Bpc=this.hqc=this.b3=void 0}}push(a){this.ops.push(a);this.pre+=a.jca;this.post+=a.P2}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.hya(a.state);case 3:return jp(this,a.oldState,a.newState);default:throw new r(a);}}hya(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){ja(a>=0);a&&(this.lka(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new oob(a));this.pre++;this.post++;return this}expand(a){ja(a>=0);a&&(this.lka(2,void 0,2),this.acc+=a);return this}insert(a){typeof a==="string"?a&&(this.lka(2,void 0,0),this.sZ+=a):(this.flush(),this.push(new pob(new lp(a))));return this}gsa(a){ja(a>=0);a&&(this.lka(3,2,2),this.acc+=a);return this}x5a(a){typeof a===
"string"?a&&(this.lka(3,2,0),this.acc+=a.length,this.sZ+=a):(this.flush(),this.push(new Iq(new Gq(1),new lp(a))));return this}vY(a){typeof a==="string"?a&&(this.lka(3,0,2),this.acc+=a.length,this.Sza+=a):(this.flush(),this.push(new Iq(new lp(a),new Gq(1))));return this}change(a,b){typeof a==="string"?typeof b==="string"?(po(a.length,b.length),a&&(this.lka(3,0,0),this.Sza+=a,this.sZ+=b)):(po(a.length,1),this.flush(),this.push(new Iq(new Fq(a),new lp(b)))):typeof b==="string"?(po(1,b.length),this.flush(),
this.push(new Iq(new lp(a),new Fq(b)))):(this.flush(),this.push(new Iq(new lp(a),new lp(b))));return this}build(){this.b3!==0&&this.flush();return new rob(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.Bpc=this.hqc=this.b3=void 0;this.acc=0;this.sZ=this.Sza=void 0}};__c.tob.prototype.iya=da(119);
qob=class{get head(){return this.Cm}finish(){ka(this.Cm==null)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new nob(b)]:a.ops;this.i=0;this.Cm=this.ops[this.i++]}};
__c.uob=class extends eq{Og(){return new __c.tob(a=>this.component.isIdentity(a))}Xg(){return new __c.lob}id(){return sob}aP(){return __c.kob}isIdentity(a){return!a.ops.length||a.ops.every(b=>b.type===0)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.yd(0,b.pre),d=b.yd(a.post,0),e=this.Og();for(;;){let g=c.head;var f=d.head;if(!f)break;f.type===2?(g=void 0,f=kp(d)):g&&(f=Math.min(g.P2,f.jca),g=Ykb(c,f),f=__c.Xkb(d,f));if(f.type===2)e.hya(f.state);else if(g)g.type===2?e.hya($kb(this,
g.state,f)):f.type===0?e.op(g):g.type===0?e.op(f):g.type===1?f.type===1?e.update(this.component.compose(g.delta,f.delta)):jp(e,alb(this,f.oldState,g),f.newState):jp(e,g.oldState,$kb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return yo(b,a);const c=this.Og(),d=this.Og(),e=a.yd(b.pre,0),f=b.yd(a.pre,0),g=xo.Wr();for(;;){var h=e.head,k=f.head;if(!h&&!k)break;h&&h.type===2?(h=kp(e),k=void 0):
k&&k.type===2?(h=void 0,k=kp(f)):h&&k&&(k=Math.min(h.jca,k.jca),h=__c.Xkb(e,k),k=__c.Xkb(f,k));if(h&&h.type===2)d.retain(h.P2),c.op(h);else if(k&&k.type===2)d.op(k),c.retain(k.P2);else if(h&&k)h.type===0||k.type===0?(d.op(k),c.op(h)):h.type===3?(d.retain(h.P2),jp(c,$kb(this,h.oldState,k),h.newState),wjb(g,k.type===3?!mp(this,h.newState,k.newState):!this.component.isIdentity(k.delta))):k.type===3?(jp(d,$kb(this,k.oldState,h),k.newState),c.retain(k.P2),xjb(g,!this.component.isIdentity(h.delta))):(h=
Ao(g,this.component.transform(h.delta,k.delta)),d.update(h.ou),c.update(h.Pu));else throw Error(`length mismatch (${a} x ${b})`);}e.finish();f.finish();return g.build(d.build(),c.build())}Dl(a){if(!a.ops.length)return a;const b=this.Og();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.Dl(c.delta));break;case 2:a=c.state;a.type===2?b.retain(a.length):b.vY(a.state);break;case 3:a=c.oldState;const d=c.newState;a.type===2&&d.type===2?b.retain(a.length):
jp(b,d,a);break;default:throw new r(c);}return b.build()}lk(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.qtc(a.ops[c],b.ops[c]))return!1;return!0}qtc(a,b){switch(a.type){case 0:return b.type===0&&a.length===b.length;case 1:return b.type===1&&this.component.lk(a.delta,b.delta);case 2:return b.type===2&&mp(this,a.state,b.state);case 3:return b.type===3&&mp(this,a.oldState,b.oldState)&&mp(this,a.newState,b.newState);default:throw new r(a);}}identity(){return sob}apply(a,
b){const c=this.Xg(),d=a.yd(b.pre);for(a=b.yd(a.length,0);;){b=d.head;var e=a.head;if(!e)break;e.type===2?(b=void 0,e=kp(a)):b&&(e=Math.min(b.length,e.jca),b=d.zo(e),e=__c.Xkb(a,e));if(e.type===2)c.region(e.state);else if(b)c.region($kb(this,b,e));else break}d.finish();a.finish();return c.build()}Rl(a,b){const c=this.Xg(),d=a.yd(b.post);for(a=b.yd(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;e.type===2?(b=d.zo(e.P2),e=kp(a)):(e=Math.min(b.length,e.P2),b=d.zo(e),e=Ykb(a,e));if(e.type===2)__c.Zkb(this,
b,e.state);else if(b)c.region(alb(this,b,e));else break}d.finish();a.finish();return c.build()}ri(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.yd();b=b.yd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!mp(this,c,d))return!1;a.zo(c.length);b.zo(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.uob&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.uob.prototype.TE=da(124);__c.np=new __c.uob(__c.gob);
op=__c.op={item:a=>{throw new r(a);}};var vob;vob=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.ib);break;case 2:a.insert&&a.insert(d.ib);break;case 1:a.delete&&a.delete(d.ib);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static Wr(){return new pp}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
pp=__c.pp=class{static insert(a,b){return(new pp).retain(a).insert(b).build()}static delete(a,b){return(new pp).retain(a).delete(b).build()}retain(a){ja(a>=0);a>0&&(this.j9(0),this.L2a+=a);return this}insert(a){a.length>0&&(this.j9(2),this.Cgb+=a);return this}delete(a){a>0&&(this.j9(1),this.PUa+=a);return this}j9(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.L2a;ja(d>0);c.call(b,{type:0,ib:d});this.pre+=this.L2a;this.post+=this.L2a;this.L2a=0;break;case 2:b=this.ops;
c=b.push;d=this.Cgb;ja(d.length>0);c.call(b,{type:2,ib:d});this.post+=this.Cgb.length;this.Cgb="";break;case 1:b=this.ops;c=b.push;d=this.PUa;ja(d>0);c.call(b,{type:1,ib:d});this.pre+=this.PUa;this.post+=this.PUa;this.PUa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){this.mode!==0&&this.j9();return new vob(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.L2a=0;this.Cgb="";this.PUa=0}};__c.wob=class extends hq{static F(a){gb(a,{ib:bp})}get ib(){return this.state.get().ib()}insert(a,b){this.qr(__c.blb(this.state.get(),pp.insert(a,b)))}delete(a,b){this.qr(__c.blb(this.state.get(),pp.delete(a,b)))}N_(a){const b=clb(this.state.get(),a);this.state.set(__c.np.apply(this.state.get(),a));this.subject.next(b)}CU(){return this.state.get()}destroy(a){ja(__c.np.ri(this.state.get(),a))}fj(a){return __c.np.ri(this.state.get(),a)}constructor(a,b){super();this.domain=a;this.state=(__c.wob.F(this),
void 0);this.subject=new __c.Umb;this.state=new iq(b)}};__c.wob.prototype.LO=da(129);var xob=class extends unb{xn(a){return a}iA(a){return new __c.wob(this.domain,a)}connect(a,b){return this.xn(a).connect(b)}jc(a){return this.xn(a).jc()}destroy(a,b){this.xn(a).destroy(b)}fj(a,b){return this.xn(a).fj(b)}constructor(){super();this.domain=__c.np}};new xob;__c.yob=class extends eq{get target(){return m(this.m1b)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}Dl(a){return this.target.Dl(a)}lk(a,b){return this.target.lk(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Rl(a,b){return this.target.Rl(a,b)}ri(a,b){return this.target.ri(a,b)}equals(a){return this===a||a instanceof __c.yob&&this.target.equals(a.target)}constructor(){super();
this.m1b=void 0}};__c.yob.prototype.aka=da(131);__c.Jq=class extends gq{get type(){return m(this.o1b)}iA(a){return this.type.iA(a)}connect(a,b){return this.type.connect(a,b)}jc(a){return this.type.jc(a)}destroy(a,b){this.type.destroy(a,b)}fj(a,b){return this.type.fj(a,b)}constructor(){super(new snb(()=>this.type.w9b),new snb(()=>this.type.Vsa));this.o1b=void 0;this.domain=new __c.yob}};__c.Jq.prototype.aka=da(130);var zob,Fob,Aob,Bob;zob=elb({},{});
__c.Eob=class{yd(a){return new Aob(this,a)}cursor(a,b){return new Bob(this,a,b)}forEach(a,{grad:b,Lc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.kG,d.VH);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,Lc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.kG,e.VH);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,Lc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.kG,e.VH):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Cob;const d=new __c.Dob;c=this.cursor(b);c.move(a);d.attrs(c.fQ,c.kja);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).Lc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.VH))b.push(`${c}:${d!=
null?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;ja(!a||a.type!==1)}};__c.Eob.prototype.OJb=da(132);__c.Cob=new __c.Eob([],0);
__c.Gob=class{yd(a,b){return new Fob(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!ilb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.hlb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${e.so!=null?`"${e.so}"`:"null"}=>${e.sn!=null?`"${e.sn}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.Hob=new __c.Gob([],0,0);
Fob=class{get ON(){return this.ovb}get next(){return this._next}qu(a,b){const c=m(this._next);ka(c.type===a,"{} != {}",c.type,a);ja(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.ovb[d]=f:delete this.ovb[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.q4a&&(this._next=jlb(this.q4a,fo(this.ovb,()=>({r:void 0}))),this.q4a=0));return c.changes}fA(a){return this.qu(0,
a)}Sfa(a){return this.qu(1,a)}finish(){ka(!this._next)}constructor(a,b=0,c=0){this.i=0;this.ovb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.q4a=Math.max(0,b-a.pre,c-a.post);!this._next&&this.q4a&&(this._next=jlb(this.q4a),this.q4a=0)}};
Aob=class{get head(){return this.Cm}get fQ(){return this.WI}get kja(){return this.l1b}zo(a){var b=this.Cm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Cm=a<b?flb(b-a):this.input[this.i++];return a}apply(a){__c.rp(a.kG,a.VH,(b,c,d)=>{c!=null&&d!=null?(this.WI[b]=c,this.l1b[b]=d):(delete this.WI[b],delete this.l1b[b])})}nw(){const a=this.Cm;if(!a||a.type===1)return zob;this.Cm=this.input[this.i++];this.apply(a);return a}finish(){ka(!this.Cm)}constructor(a,
b=0){this.i=0;this.WI={};this.l1b={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,flb(b)]:a.items;this.Cm=this.input.length?this.input[this.i++]:void 0}};
Bob=class{get NB(){return this.yd.length-this.Zea}get fQ(){return this.yd.fQ}get kja(){return this.yd.kja}move(a,b){var c=this.wib;b=c?b?{cells:__c.ip(c.cells,b.cells)}:c:b;ja(a>=0,"{} < 0",a);a=this.Zea+a;for(ja(a<=this.yd.length,"{} > {}",a,this.yd.length);this.Zea<a;){c=this.yd.nw();const d=this.yd.zo(a-this.Zea);this.Zea+=d;b&&b.cells&&b.cells(d,c.kG,this.fQ,c.VH,this.kja)}}finish(){this.yd.nw();this.yd.finish()}constructor(a,b,c){this.wib=c;this.Zea=0;this.yd=new Aob(a,b)}};
__c.Dob=class{yn(a,b,c){this.ss[a]!==c?(this.kG[a]=b,this.VH[a]=c):(delete this.kG[a],delete this.VH[a]);return this}attrs(a,b){__c.rp(a,b,(c,d,e)=>this.yn(c,d,e));return this}Lc(a){a>0&&(Object.keys(this.kG).length&&(this.length&&(this.items.push(flb(this.length)),this.length=0),this.items.push(elb(this.kG,this.VH)),__c.rp(this.kG,this.VH,(b,c,d)=>{if(c!=null){this.as[b]=c;this.ss[b]=d;var e;((e=this.attributes[b])!==null&&e!==void 0?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],delete this.ss[b]}),
this.kG={},this.VH={}),this.length+=a,this.r4+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),Lc:c=>this.Lc(c)});return this}build(){for(const a of __c.qp(this.as))this.yn(a);for(const a of __c.qp(this.kG))this.yn(a);Object.keys(this.kG).length?(ka(!!this.length,"attributes still open: {}",this.kG),this.items.push(flb(this.length)),this.items.push(elb(this.kG,this.VH)),this.length=0,this.kG={},this.VH={}):this.r4-=this.length;return new __c.Eob(this.items,this.r4,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.ss={};this.length=this.r4=0;this.kG={};this.VH={}}};var tp,Iob,Job,Kob,nlb,Mob,Lob,Oob,Pob,Qob,Nob;tp=class{static from(a){if(a instanceof tp)return a;if(Array.isArray(a)){const [b,c]=a;return new tp(b,c)}return new tp(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
Iob=class{get isEmpty(){return!this.Xe.size}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.Xe){var d=b<f.from||f.to<a?void 0:new tp(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new Iob(c)}toString(){return[...this.Xe].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.Xe=a}};Job=new Iob;
Kob=class{range(a,b){b?this.c$.set(a,tp.from(b)):this.c$.delete(a);return this}Xe(a){a.forEach((b,c)=>this.c$.set(c,tp.from(b)));return this}build(){return this.c$.size?new Iob(this.c$):Job}constructor(){this.c$=new Map}};nlb=class{toString(){return`${this.kca||"_"}->${this.fca||"_"}`}constructor(a,b){this.kca=a;this.fca=b}};Mob=class{toString(){return`${Lob[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};Lob={[0]:"R",[1]:"I"};
Oob=class{yd(a,b){return new Nob(this,a,b)}toString(){const a=this.Ffa.join(""),b=[...this.Xe].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.Ffa=a;this.Xe=b;this.pre=c;this.post=d}};Pob=new Oob([],new Map,0,0);
Qob=class{append(a,b){ja(b>=0,"{} < 0",b);if(!b)return this;this.b3===a?this.length+=b:(this.b3!=null&&this.ops.push(new Mob(this.b3,this.length)),this.b3=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.z2a(a,void 0,b)}z2a(a,b,c){b=new nlb(b&&tp.from(b),c&&tp.from(c));this.Xe.set(a,b);return this}YNa(a){a.forEach((b,c)=>this.Xe.set(c,
b));return this}build(){const a=this.b3,b=this.length;a===0?(this.pre-=b,this.post-=b):a!=null&&this.ops.push(new Mob(a,b));return this.ops.length||this.Xe.size?new Oob(this.ops,this.Xe,this.pre,this.post):Pob}constructor(){this.ops=[];this.b3=void 0;this.post=this.pre=this.length=0;this.Xe=new Map}};
Nob=class{get next(){return this._next}get tvc(){return this.nvb}get pOb(){return this.aSa}get mKa(){return this.aSa-this.nvb}qu(a,b){const c=m(this._next);ka(c.type===a,"{} != {}",c.type,a);ja(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new Mob(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}fA(a){this.qu(0,a);this.nvb+=a;this.aSa+=a}Sfa(a){this.qu(1,a);this.aSa+=a}finish(){ka(!this._next)}constructor(a,b=0,c=0){this.aSa=this.nvb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.Ffa,new Mob(0,b)]:a.Ffa;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.Rob=class extends eq{Xg(){return new Kob}Og(){return new Qob}isIdentity(a){return!a.Ffa.length&&!a.Xe.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of olb(a.Xe,b.Xe)){var g=a.Xe.get(f),h=b.Xe.get(f);g&&h?(ja(sp(g.fca,h.kca)),e.set(f,new nlb(g.kca,h.fca))):g?c.set(f,g):h&&d.set(f,h)}f=this.Og();g=a.yd(0,b.pre);a=b.yd(a.post,0);b=g.next;for(h=a.next;h;){if(h.type===1)b=h.length,up(c,void 0,g.pOb+a.mKa,b),a.Sfa(b),f.insert(b);
else if(b)b.type===1?(b=Math.min(b.length,h.length),up(d,a.tvc-g.mKa,void 0,-b),g.Sfa(b),a.fA(b),f.insert(b)):(b=Math.min(b.length,h.length),g.fA(b),a.fA(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.YNa(e);f.YNa(c);f.YNa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return yo(b,a);var c=new Map,d=new Map;const e=new Map,f=xo.Wr();for(var g of olb(a.Xe,b.Xe)){var h=a.Xe.get(g),k=b.Xe.get(g);h&&k?(ja(sp(h.kca,k.kca)),e.set(g,
new nlb(k.fca,h.fca)),wjb(f)):h?c.set(g,h):k&&d.set(g,k)}h=a.yd(b.pre,0);k=b.yd(a.pre,0);g=this.Og();const l=this.Og();var n=h.next;let p=k.next;for(;n||p;){if(n&&n.type===1)n=n.length,up(d,k.tvc+h.mKa,k.pOb+h.mKa,n),h.Sfa(n),l.retain(n),g.insert(n);else if(p&&p.type===1)n=p.length,up(c,h.tvc+k.mKa,h.pOb+k.mKa,n),up(e,void 0,h.pOb+k.mKa,n),k.Sfa(n),l.insert(n),g.retain(n);else if(n&&p)n=Math.min(n.length,p.length),h.fA(n),k.fA(n),l.retain(n),g.retain(n);else throw Error(`unreachable case: ${n} x ${p}`);
n=h.next;p=k.next}h.finish();k.finish();d=l.YNa(d).build();c=g.YNa(c).YNa(e).build();po(d.post-d.pre,b.post-b.pre);po(c.post-c.pre,a.post-a.pre);return f.build(d,c)}Dl(a){if(!a.Xe.size)return Pob;const b=new Map(a.Xe);klb(a,{insert:(c,d,e)=>up(b,e,void 0,c)});a=Og(b,c=>new nlb(c.fca,c.kca));return new Oob([],a,0,0)}lk(a,b){if(a===b)return!0;if(a.Ffa.length!==b.Ffa.length||a.Xe.size!==b.Xe.size)return!1;for(let e=0;e<a.Ffa.length;e++){var c=a.Ffa[e],d=b.Ffa[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.Xe.keys())if(c=
a.Xe.get(e),d=b.Xe.get(e),c?!(d&&sp(c.kca,d.kca)&&sp(c.fca,d.fca)):d)return!1;return!0}id(){return Pob}identity(){return Pob}apply(a,b){if(this.isIdentity(b)||!a.Xe.size&&!b.Xe.size)return a;const c=this.Xg(),d=new Map(a.Xe);for(const [e,f]of b.Xe)ja(sp(a.Xe.get(e),f.kca)),d.delete(e),c.range(e,f.fca);klb(b,{insert:(e,f,g)=>mlb(d,g,e)});return c.Xe(d).build()}Rl(a,b){if(this.isIdentity(b)||!a.Xe.size&&!b.Xe.size)return a;const c=this.Xg(),d=new Map(a.Xe);for(const [e,f]of b.Xe)ja(sp(a.Xe.get(e),f.fca)),
d.delete(e),c.range(e,f.kca);klb(b,{insert:(e,f)=>mlb(d,f,-e)});return c.Xe(d).build()}ri(a,b){const c=a.Xe,d=b.Xe;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>sp(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.Rob}constructor(){super();this.aP=Job}};__c.Rob.prototype.TE=da(123);__c.Sob=new __c.Rob;var Tob=class extends eq{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=plb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=plb(a.key,b.key);a=this.components[c].transform(a.value,b.value);return vjb(a,d=>({key:c,value:d}))}Dl(a){return{key:a.key,value:this.components[a.key].Dl(a.value)}}lk(a,b){return a.key===b.key&&this.components[a.key].lk(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=plb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Rl(a,b){const c=plb(a.key,b.key);return{key:c,value:this.components[c].Rl(a.value,b.value)}}ri(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].ri(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var Uob=class extends eq{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}Dl(a){return this.sum.Dl(a)}lk(a,b){return this.sum.lk(a,b)}identity(a){return this.sum.identity(qlb(this,a))}apply(a,b){return this.sum.apply(qlb(this,a),b).value}Rl(a,b){return this.sum.Rl(qlb(this,a),b).value}ri(a,b){return a===b||this.sum.ri(qlb(this,a),qlb(this,b))}equals(a){return this===a||a instanceof Uob&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.gVa=b;this.sum=new Tob(this.components)}};var rlb=class extends gq{create(a,b,c){return super.create(a,b,c)}iA(a){const b=this.gVa(a);return this.xM[b].iA(a)}connect(a,b){const c=this.FAb(a),d=this.xM[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{ja(e.key===c);d.next(e.value)},complete:()=>d.complete()}}jc(a){const b=this.FAb(a);return this.xM[b].jc(a)}destroy(a,b){const c=this.FAb(a),d=this.gVa(b);ja(c===d);this.xM[c].destroy(a,b)}fj(a,b){const c=this.FAb(a),d=this.gVa(b);return c===d&&this.xM[c].fj(a,
b)}constructor(a,b,c){super(fq,fq);this.xM=a;this.gVa=b;this.FAb=c;this.domain=new Uob(fo(this.xM,d=>d.domain),this.gVa)}};var Vob=class extends eq{isIdentity(){return!0}compose(){return 1}transform(){return yo(1,1)}Dl(){return 1}lk(){return!0}identity(){return 1}apply(){return 1}Rl(){return 1}ri(){return!0}equals(a){return this===a||a instanceof Vob}constructor(){super();this.unit=1}},Wob=new Vob;var Xob;Xob=class extends gq{iA(a){return a}connect(){return{next:()=>{},complete:()=>{}}}jc(a){return a}destroy(){}fj(){return!0}constructor(){super(Jo,Jo);this.domain=Wob}};__c.Yob=new Xob;var Zob=new Map,$ob=class extends eq{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>b===0)}compose(a,b){return tlb(a,b)}transform(a,b){return yo(b,a)}Dl(a){return a.size?Og(a,b=>-b):a}lk(a,b){return slb(a,b)}identity(){return Zob}apply(a,b){return tlb(a,b)}Rl(a,b){return tlb(a,this.Dl(b))}ri(a,b){return slb(a,b)}equals(a){return this===a||a instanceof $ob}};var apb,bpb;
apb=class extends hq{static F(a){gb(a,{values:bp.struct})}N_(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}CU(){return new Map(this.map)}fj(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.qr(c);return!0}add(a){const b=this.map.get(a)||0;b>0||this.qr(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.qr(new Map([[a,-b]]))}has(a){return(this.map.get(a)||0)>
0}get values(){return[...ulb(this.map,a=>a>0).keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}constructor(a,b){super();this.domain=a;this.map=(apb.F(this),void 0);this.map=new Pmb(b)}};bpb=class extends gq{iA(a){return new apb(this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){ja(this.domain.ri(a.jc(),b))}fj(a,b){return a.fj(b)}constructor(){super(fq,fq);this.domain=new $ob}};__c.cpb=new bpb;var dpb,gpb,hpb,kpb,Kq,tpb,Cpb,Dpb,Fpb,Hpb,Ipb;dpb=Ro({id:kq,version:lq});__c.epb=dp({values:{app:dpb},attributes:{TX:Xo(__c.rkb(kq,kq))}});__c.fpb=Uo(-1,1);gpb=Uo(0,100);hpb=Uo(-100,100);__c.ipb=Uo(0,1);__c.jpb=Uo(-180,180);kpb=Xo(gpb);Kq=Xo(hpb);__c.lpb=Xo(__c.ipb);__c.mpb=Xo(__c.jpb);Lq=__c.Lq=To(__c.Xmb);__c.npb=Wo(Lq);__c.opb=Xo(__c.npb);__c.ppb=To(/^100%$/);__c.qpb=To(/^[0-9]+(\.[0-9]+)?%$/);__c.rpb=To(/^[0-9]+(\.[0-9]+)?px/);__c.spb=__c.$o(ap(kq));__c.$o(__c.Yob);tpb=vkb(0,10);
__c.upb=Qo(tpb,a=>a.length<=10);__c.vpb=Xo(__c.upb);__c.wpb=To(vlb("L"));__c.xpb=To(vlb("T"));__c.ypb=Xo(Po(1,2,3));__c.zpb=Ro({text:kq,Z$:jq});__c.Apb=Po(1,2);__c.Bpb=Ro({top:nq,left:nq});Cpb=Ro({width:oq,height:oq});Dpb=Ro({top:nq,left:nq,height:oq,width:oq});__c.Epb=Xo(Dpb);Fpb=Ro({sf:Qo(lq)});__c.Gpb=Xo(Fpb);Hpb=Ro({text:kq,user:kq,brand:kq});Ipb=Ro({text:kq,url:kq});var Jpb,Kpb,Lpb,Mpb,Npb,Opb,Ppb,Qpb;Jpb=Ro({type:Po("google-sheets"),url:kq,l2a:Wo(mq),HG:kq,range:__c.pq});Kpb={oPb:To(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*|[A-Z]+[1-9]\d*:[A-Z]+[1-9]\d*)$/)};Lpb=Ro(Kpb);Mpb=Ro({type:Po("copy-sheets"),l2a:Wo(mq),dg:kq,V8:kq,Xe:Qo(Lpb)});Npb=Ro({...Kpb});Opb=Ro({type:Po("live-sheets"),l2a:Wo(mq),V8:kq,Xe:Qo(Npb)});Ppb=Ro({app:dpb,source:kq,title:__c.pq});Qpb=Ro({type:Po("app"),KXd:Ppb,l2a:Wo(mq)});
__c.Rpb=__c.So({"google-sheets":Jpb,"copy-sheets":Mpb,"live-sheets":Opb,app:Qpb},a=>a.type);var Spb,Tpb,Mq,Upb,Vpb,Wpb,Xpb,Ypb,Zpb,$pb,aqb,bqb,cqb,dqb,eqb,fqb;Spb=dp({attributes:{Hjc:Xo(Po(1,2,3,4)),value:Xo(nq)}});Tpb=__c.$o(lq,Spb);Mq=dp({attributes:{X3a:__c.uq,Ti:__c.uq},Rb:{Z3:Tpb}});Upb=Mq.Ai({values:{type:Po("brightness")}});Vpb=Mq.Ai({values:{type:Po("contrast")}});Wpb=Mq.Ai({values:{type:Po("highlights")}});Xpb=Mq.Ai({values:{type:Po("shadows")}});Ypb=Mq.Ai({values:{type:Po("whites")}});Zpb=Mq.Ai({values:{type:Po("blacks")}});$pb=Mq.Ai({values:{type:Po("saturation")}});aqb=Mq.Ai({values:{type:Po("vibrance")}});
bqb=Mq.Ai({values:{type:Po("temperature")}});cqb=Mq.Ai({values:{type:Po("tint")}});dqb=Ro({id:kq});eqb=Mq.Ai({values:{type:Po("lut"),i_a:dqb}});fqb=vp({brightness:Upb,contrast:Vpb,highlights:Wpb,shadows:Xpb,whites:Ypb,blacks:Zpb,saturation:$pb,vibrance:aqb,temperature:bqb,tint:cqb,lut:eqb},a=>a.type,a=>a.type);__c.gqb=gp(fqb);var hqb,iqb,kqb,mqb,nqb,pqb,qqb,rqb,sqb,tqb,uqb,wqb;hqb=Ro({top:nq,left:nq,width:oq,height:oq,rotation:__c.jpb});iqb=Ro({id:kq,qg:nq});__c.jqb=dp({attributes:{Pca:Zo(iqb),brightness:Kq,contrast:Kq,saturation:Kq,F_:Kq,R4a:kpb,blur:Kq,Yka:Kq,tDa:Kq,Uma:kpb,Jta:kpb,highlights:Kq,Q8:Kq,W_:kpb,Rwa:kpb}});kqb=Yo(Wo(__c.jqb));__c.lqb=dp({values:{media:dpb},Rb:{filter:kqb},attributes:{WE:Zo(dpb),Lf:Zo(hqb),ba:__c.lpb,Ag:Xo(__c.rkb(Lq,Lq)),altText:Zo(__c.zpb)}});mqb=Yo(Wo(__c.lqb));nqb=Ro({$c:oq,ww:oq});
__c.oqb=dp({values:{video:kq,id:__c.pq},Rb:{filter:kqb,Yt:__c.gqb},attributes:{Lf:Xo(hqb),ba:__c.lpb,Ag:Xo(__c.rkb(Lq,Lq)),altText:Zo(__c.zpb),trim:Zo(nqb),Fra:Xo(__c.Apb),autoplay:sq,playbackRate:Zo(Uo(.25,4)),volume:Xo(Uo(0,4))}});pqb=Yo(Wo(__c.oqb));qqb=Ro({color:Lq,ba:__c.ipb,position:nq},a=>a.position>=-1&&a.position<=2);rqb=Qo(qqb,a=>a.length>=2&&a.every((b,c,d)=>c===0||d[c-1].position<=b.position));sqb=Xo(rqb);tqb=dp({values:{type:Po("linear")},attributes:{Vb:sqb,rotation:__c.mpb}});
uqb=dp({values:{type:Po("radial")},attributes:{Vb:sqb,center:Xo(__c.Bpb)}});__c.vqb=vp({linear:tqb,radial:uqb},a=>a.type,a=>a.type);wqb=Yo(Wo(__c.vqb));__c.Nq=dp({Rb:{image:mqb,video:pqb,gradient:wqb},attributes:{dropTarget:__c.Pnb,color:__c.opb,ba:__c.lpb,locked:sq,HB:sq,CM:__c.xq,vp:__c.xq,flipX:sq,flipY:sq}});__c.Oq=dp({Rb:{fill:__c.Nq},attributes:{weight:__c.vq,color:__c.opb,Po:__c.vpb,Ct:sq}});__c.xqb=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return a!=="false";default:throw Error();}}validate(a){ja(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.A1c(a)}A1c(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.bdd=c}};__c.yp=Object.keys({Yv:0})[0];
__c.Hlb=class{getScope(a){return this.attributes[a].scope}Ppa(a){if(typeof a==="function")return a;switch(a){case "all":return()=>!0;case "block":return this.kye;case "inline":return this.Vye;default:throw new r(a);}}copy(a,b,c){__c.zp(this,b,a,(d,e)=>c[e]=d)}RQ(a){for(const [b,c]of Object.entries(a))ja(this.EC(b)),c!=null&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);b!=null&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return b!=null?a.normalize(b):void 0}encode(a,
b){return __c.xp(this.attributes[a],b)}decode(a,b){return __c.wp(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.oPa=b;this.sVa=c;this.c5e=d;this.Si=fo(this.attributes,e=>e.defaultValue);this.fAb={as:this.Si,ss:fo(this.Si,(e,f)=>e!=null?this.encode(f,e):void 0)};this.EC=e=>e in this.attributes;this.kye=e=>this.getScope(e)==="block";this.Vye=e=>this.getScope(e)==="inline";this.EHb=e=>{e=xlb(e);return!(!e||!this.sVa.has(e))};this.KKa=e=>typeof e!=="string"?!1:__c.zlb(this,e)!=null;
this.cdd=e=>{const f=this.c5e;return typeof e==="string"&&f.has(e)};this.jDa=(e,f,g)=>f===g?!0:f!=null&&g!=null?this.attributes[e].jDa(f,g):f==null&&g==null}};__c.Hlb.prototype.t2=da(133);
var Clb=class extends __c.xqb{HSa(){return new Clb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}jDa(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);ja(Number.isInteger(b)&&b>=-2147483648);ja(Number.isInteger(c)&&c<=2147483647);ja(Number.isInteger(d));
ja(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.wlb(this)}},Elb=class extends __c.xqb{HSa(){return new Elb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}A1c(a){return a===0?a:Number(a.toPrecision(this.nyd))}jDa(a,b){return a===b}encode(a){return`${this.tya==="fixed"&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,nyd:d=6,tya:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);ja(Number.isFinite(b)&&b>=-Number.MAX_VALUE);ja(Number.isFinite(c)&&c<=Number.MAX_VALUE);ja(Number.isInteger(d)&&1<=d&&d<=15);this.min=b;this.max=c;this.units=g;this.nyd=d;this.tya=e;__c.wlb(this)}},Flb=class extends __c.xqb{isValid(a){return this.jBa.test(a)}HSa(){return new Flb(this.scope,this.jBa,this.defaultValue,!0)}jDa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.jBa=
b;__c.wlb(this)}},Glb=class extends __c.xqb{isValid(a){return this.BEd.has(a)}HSa(){return new Glb(this.scope,this.BEd,this.defaultValue,!0)}jDa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.BEd=new Set(b);__c.wlb(this)}};var Cqb,Dqb,Eqb;__c.yqb="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.zqb=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.Aqb=["normal","italic"];__c.Bqb=["none","underline"];Cqb=["start","center","end","justify"];
Pq=__c.Pq={fontFamily:Dp("inline",__c.zqb,"YACgEZ1cb1Q,0"),fontSize:Cp("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:Ep("inline",__c.yqb),fontStyle:Ep("inline",__c.Aqb),RR:Dp("inline",__c.$mb,"1"),verticalAlign:Dp("inline",__c.bnb,"0%"),color:Dp("inline",__c.Xmb,"#000000"),backgroundColor:Dp("inline",Ymb,"transparent"),m5:Cp("inline",{min:0,max:.2,units:"em"}),l5:Cp("inline",{min:0,max:.16,units:"em"}),Sn:Ep("inline",__c.Bqb),Oz:Ep("inline",["none","strikethrough"]),link:Dp("inline",__c.Wmb,
""),letterSpacing:Cp("inline",{min:-.2,max:.8,units:"em"}),lineHeight:Cp("block",{min:.5,max:2.5,defaultValue:1.4}),direction:Ep("block",["ltr","rtl"]),textAlign:Ep("block",Cqb),xB:Ep("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),hL:__c.Dlb({min:0}),marginInlineStart:__c.Dlb({min:0,max:200,units:"px"}),textIndent:__c.Dlb({min:0,max:32,units:"px"}),y5a:Dp("inline",/^$/,""),z5a:Dp("inline",/^$/,""),Orb:Dp("inline",/^$/,"")};
Dqb={up:Dp("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};Eqb={...fo(Pq,a=>a.HSa()),UB:Ep("inline",["add","delete"]).HSa()};__c.Qq=__c.Ilb({static:Pq,rVa:Dqb,Yv:Eqb});__c.Fqb=`${Object.keys({up:0})[0]}/`;__c.Gqb=Object.keys({UB:0})[0];var Jqb=class{j9(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(Fp(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Jlb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ja(b>=0,"{} < 0",b);b&&(this.j9(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){this.mode!==0&&this.j9();return this.ops?new Hqb(this.ops,this.pre,this.post):Iqb}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},Kqb=class{static create(a,b,c,d=0,e=0){ja(d>=0,"{} < 0",d);ja(e>=0,"{} < 0",e);b=Math.max(0,d-b,e-c);return new Kqb(b?[...a,Fp(b)]:a)}get head(){return this.Cm}fA(a){return this.ED(0,a).length}ED(a,b=1){const c=m(this.Cm);if(c.type!==a)throw Error();const d=c.length;ja(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Cm=Fp(d-b),Fp(b);case 1:return this.Cm=Jlb(d-b),Jlb(b);default:throw new r(a);}else return this.Cm=this.ops[this.i++],c}finish(){ka(this.Cm==null)}constructor(a){this.ops=a;this.i=0;this.Cm=a[this.i++]}},Hqb=class{isEmpty(){return this.pre===0&&this.post===0&&this.ops.length===0}yd(a,b){return Kqb.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},Iqb=new Hqb([],0,0),Lqb=class extends eq{Og(){return new Jqb}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.Og(),d=a.yd(0,b.pre),e=b.yd(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(g.type===1)c.append(e.ED(g.type,g.length));else if(f)if(f.type===1){var h=Math.min(f.length,g.length);d.ED(f.type,h);e.ED(g.type,h);c.append(Jlb(h))}else h=
Math.min(f.length,g.length),d.ED(f.type,h),e.ED(g.type,h),c.append(Fp(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return yo(b,a);const c=a.yd(b.pre,0),d=b.yd(a.pre,0),e=this.Og(),f=this.Og();for(var g=c.head,h=d.head;g||h;){if(g&&g.type===1)h=c.ED(g.type,g.length),f.append(Fp(h.length)),e.append(h);else if(h&&h.type===1){var k=
d.ED(h.type,h.length);f.append(k);e.append(Fp(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.ED(g.type,k),h=d.ED(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return yo(f.build(),e.build())}Dl(){return Iqb}lk(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.yd();b=b.yd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(d.type!==0||c.length!==d.length)return!1;
a.fA(c.length);b.fA(d.length);break;case 1:if(d.type!==1||c.length!==d.length)return!1;Gp(a,c.length);Gp(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return Iqb}apply(a){return a}Rl(a){return a}ri(a,b){return a===b}equals(a){return this===a||a instanceof Lqb}},Klb=new Map,Kp=new Lqb;var Nqb,Pqb,Oqb,Mqb,Rqb,Nlb,Sqb,Tqb;
Nqb=class extends eq{Xg(){return new Nlb(this.hC)}aP(){return Mqb}He(a={}){return{x:a.x||Kp.Og().build(),y:a.y||Kp.Og().build(),attrs:a.attrs||Ip(this).build()}}isIdentity(a){return Kp.isIdentity(a.x)&&Kp.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=Kp.compose(a.x,b.x),d=Kp.compose(a.y,b.y);a=Rlb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.He({x:c,y:d,attrs:a});const e=Ip(this);Plb(a,b.attrs,e,(f,g,h)=>{g?h?(ka(this.hC(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}oIa(a,b,c,d){return Kp.isIdentity(c)&&Kp.isIdentity(d)||b.items.isEmpty()?b:Qlb(a,this.hC,b,c,d)}transform(a,b){const c=xo.Wr(),{ou:d,Pu:e}=Ao(c,Kp.transform(a.x,b.x)),{ou:f,Pu:g}=Ao(c,Kp.transform(a.y,b.y));a=Rlb(this,a.attrs,d,f);b=Rlb(this,b.attrs,e,g);if(a.items.isEmpty()||b.items.isEmpty()){var h=this.He({x:d,y:f,attrs:b});a=this.He({x:e,y:g,attrs:a});return c.build(h,a)}var k=Math.max(a.Jq,b.Jq),l=Math.max(a.VA,b.VA);a=a.yd(void 0,k,l);k=b.yd(void 0,k,l);b=Ip(this);
l=Ip(this);for(var n=a.head,p=k.head;n||p;){if(n&&n.type===0||p&&p.type===0){n=a.Mx();p=k.Mx();const x=b.Mx(),z=l.Mx();for(var q=n.head,u=p.head;q||u;){if(q&&q.type===0||u&&u.type===0){q=n.nw();u=p.nw();for(h of Olb(q,u)){q=h;u=n.attrs[h];var w=p.attrs[h];u&&w?(ka(this.hC(q,u.o,w.o)),q=zo({o:w.n,n:u.n})):q=yo(w,u);const {ou:B,Pu:C}=Ao(c,q);x.yn(h,C);z.yn(h,B)}}else if(q&&u)q=Math.min(q.length,u.length),n.zo(q),p.zo(q),x.mC(q),z.mC(q);else if(q)q=q.length,n.zo(q),x.mC(q),z.mC(q);else if(u)q=u.length,
p.zo(q),x.mC(q),z.mC(q);else throw Error();q=n.head;u=p.head}n.finish();p.finish();x.finish();z.finish()}else if(n&&p)n=Math.min(n.length,p.length),Jp(a,n),Jp(k,n),b.rows(n),l.rows(n);else if(n)n=n.length,Jp(a,n),b.rows(n),l.rows(n);else if(p)n=p.length,Jp(k,n),b.rows(n),l.rows(n);else throw Error();n=a.head;p=k.head}a.finish();k.finish();h=this.He({x:d,y:f,attrs:l.build()});a=this.He({x:e,y:g,attrs:b.build()});return c.build(h,a)}Dl(a){a=a.attrs.yd();const b=Ip(this);for(var c=a.head;c;){if(c.type===
0){c=a.Mx();const e=b.Mx();for(var d=c.head;d;){if(d.type===0){d=c.nw();for(const f of Np(d))d=c.attrs[f],e.yn(f,d&&{o:d.n,n:d.o})}else d=d.length,c.zo(d),e.mC(d);d=c.head}c.finish();e.finish()}else c=c.length,Jp(a,c),b.rows(c);c=a.head}return this.He({attrs:b.build()})}lk(a,b){return Kp.lk(a.x,b.x)&&Kp.lk(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:Kp.Og().build(),y:Kp.Og().build(),attrs:Ip(this).build()}}apply(a,b){a=this.oIa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=
this.Xg();Plb(a,b.attrs,c,(d,e,f)=>this.YXd(d,e,f));return c.build()}Rl(a,b){if(b.attrs.items.isEmpty())return this.oIa("unapply",a,b.x,b.y);const c=this.Xg();Plb(a,b.attrs,c,(d,e,f)=>this.p9e(d,e,f));return this.oIa("unapply",c.build(),b.x,b.y)}ri(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof Nqb?this.hC===a.hC:!1}constructor(a){super();this.hC=a;this.dBd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.hC(b,c.o,d.o)&&this.hC(b,e,f)}return!c&&!d};this.YXd=(b,
c,d)=>d!=null?(ka(this.hC(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.p9e=(b,c,d)=>d!=null?(ka(this.hC(b,c,d.n)),d.o):c}};
Pqb=class{isEmpty(){return!this.items.length}yd(a){return new Oqb(this.items,this.length,a)}forEach(a,{grad:b,Lc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.yd();a=a.yd();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(e.type!==0)return!1;d=c.nw();e=a.nw();if(d!=null?e==null||
!b(d,e):e!=null)return!1;break;case 1:if(e.type!==1||d.length!==e.length)return!1;c.zo(d.length);a.zo(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.Qqb=new Pqb([],0);
Oqb=class{get head(){return this.Cm}zo(a){var b=this.Cm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Cm=a<b?Slb(b-a):this.input[this.i++];return a}nw(){const a=this.Cm;if(a&&a.type!==1)return this.Cm=this.input[this.i++],a.value}finish(){ka(this.Cm==null,"stream not empty: {}",this.Cm)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,Slb(c)]:a;this.Cm=this.input.length?this.input[this.i++]:void 0}};
Lp=__c.Lp=class{grad(a){if(a==null)return this;ka(this.xqa==null,"nextGrad already set: {}",this.xqa);this.xqa=a;return this}Lc(a){if(a<=0)return this;this.xqa!=null&&(this.wqa&&(this.items.push(Slb(this.wqa)),this.wqa=0),this.items.push({type:0,value:this.xqa}),this.xqa=void 0);this.wqa+=a;this.r4+=a;return this}build(){this.xqa!=null?(ka(this.wqa!==0),this.items.push(Slb(this.wqa)),this.items.push({type:0,value:this.xqa}),this.wqa=0,this.xqa=void 0):this.r4-=this.wqa;return new Pqb(this.items,this.r4)}constructor(){this.items=
[];this.wqa=this.r4=0;this.xqa=void 0}};
Mp=__c.Mp=class{static of(a,b,c,d){return b.isEmpty()?Mqb:new Mp(a,b,c,d)}yd(a=()=>!0,b=0,c=0){b=Math.max(this.Jq,b);c=Math.max(this.VA,c);const d=this.items.yd(c);return new Rqb(this.hC,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.yd(a,c,d);c=a.head;let e=0;for(;c;)e=c.type!==0&&a.iIe?e+Jp(a,c.length):e+a.s7b((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.Mx;this.items.forEach(this.items.length,{Lc:a.rows,grad:c=>{const {mC:d,grad:e,Cdb:f}=b();c.forEach(c.length,{Lc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof Mp&&this.VA===a.VA&&this.Jq===a.Jq?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>Xlb(this.hC,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",Mlb))}constructor(a,b,c,d){this.hC=a;this.items=b;this.Jq=c;this.VA=d}};Mqb=new Mp((a,b,c)=>b===c,__c.Qqb,0,0);
Rqb=class{get head(){return this.qVa.head}s7b(a){ka(this.iX==null);const b=this.Mx();var c=b.head;let d=0;for(;c;){if(c.type===0)b.nw();else{c=b.zo(c.length);if(!Op(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?Jp(this,1):0}get iIe(){ka(this.head!=null);ka(this.iX==null);return this.head.type===1&&this.GB.isEmpty()}Mx(){ka(this.iX==null);var a=this.qVa.nw();if(a){a=a.yd(this.Jq);for(var b=this.GB.yd(this.Jq),c=new Lp,d=a.head,e=b.head;d||e;){if(d&&
d.type===0||e&&e.type===0){const g=a.nw(),h=b.nw();b:{d=this.oGa;e=this.Ppa;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];ja(Tlb(d,f,h===null||h===void 0?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=Op(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.zo(d),b.zo(d),c.Lc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.GB;this.iX=f;return new Sqb(this.oGa,this.Ppa,this.iX.yd(this.Jq),this.osc)}finish(){ka(this.iX==
null);this.qVa.finish()}constructor(a,b,c,d,e){this.oGa=a;this.qVa=b;this.Ppa=c;this.Jq=d;this.VA=e;this.GB=__c.Qqb;this.iX=void 0;this.osc=()=>{ka(this.iX!=null);this.GB=this.iX;this.iX=void 0}}};
Nlb=class{Mx(){ka(this.Bqb==null);return this.Bqb=new Tqb(this.hC,this.e5d)}rows(a){this.H$b.Lc(a);return this}build(){ka(this.Bqb==null);ka(this.GB.isEmpty(),"prevDxs not empty: {}",this.GB);const a=this.H$b.build();return Mp.of(this.hC,a,this.Jq,a.length)}constructor(a){this.hC=a;this.H$b=new Lp;this.Jq=0;this.GB=__c.Qqb;this.Bqb=void 0;this.e5d=b=>{ka(this.Bqb!=null);this.Jq=Math.max(this.Jq,b.length);var c=this.GB.yd(this.Jq);const d=b.yd(this.Jq),e=new Lp;for(var f=c.head,g=d.head;f||g;){if(f&&
f.type===0||g&&g.type===0)f=c.nw(),g=d.nw(),f=__c.Wlb(this.hC,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.zo(f),d.zo(f),e.Lc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.H$b.grad(c);this.GB=b;this.Bqb=void 0}}};
Sqb=class{get attrs(){return this.WI}get head(){return this.gBb.head}zo(a){return this.gBb.zo(a)}nw(){const a=this.gBb.nw();this.bma(a);return a}finish(){this.gBb.finish();this.Ol()}bma(a){if(a)for(const b in a){if(!this.Ppa(b))continue;const c=__c.Ulb(this.oGa,b,this.WI[b],a[b]);c==null?delete this.WI[b]:this.WI[b]=c}}constructor(a,b,c,d){this.oGa=a;this.Ppa=b;this.gBb=c;this.Ol=d;this.WI={}}};
Tqb=class{yn(a,b){var c=this.oGa,d=this.WI[a];(b=c(a,d,b)?void 0:{oc:d,r:b})?(this.UJ||(this.UJ={}),this.UJ[a]=b):this.UJ&&(delete this.UJ[a],Op(this.UJ)&&(this.UJ=void 0));return this}attrs(a){for(const b of Np(a))this.yn(b,a[b]);return this}mC(a){if(a<=0)return this;this.bma();this.rwa.Lc(a);return this}bma(){if(this.UJ){var a=this.UJ;this.UJ=void 0;for(const b in a){const c=__c.Ulb(this.oGa,b,this.WI[b],a[b]);c==null?delete this.WI[b]:this.WI[b]=c}this.rwa.grad(a)}}finish(){this.bma();ka(Op(this.WI));
const a=this.rwa.build();this.Ol(a)}constructor(a,b){this.oGa=a;this.Ol=b;this.WI={};this.UJ=void 0;this.rwa=new Lp}};var Uqb=class extends hq{get Jq(){return this.grid.Jq}get VA(){return this.grid.VA}set(a,b,c){const {z3e:d,m3e:e,lCb:f=d,jje:g=e}=b,h=__c.Bp(this.ph,__c.Ap(this.ph,a,c)),k=__c.Blb(this.ph,h,(n,p)=>__c.Alb(this.ph,h,p));b=fo(k,()=>{});c=Ip(this.domain);c.rows(d);for(var l=d;l<=f;l++){const n=c.Mx();n.mC(e);for(let p=e;p<=g;p++){const q=this.grid.get(l,p),u={};__c.zp(this.ph,k,a,(w,x)=>{u[x]={o:q&&q[x],n:k[x]}});n.attrs(u);n.mC(1)}n.attrs(b);n.finish();c.rows(1)}a=c.Mx();a.mC(e);for(l=e;l<=g;l++)a.attrs(b),
a.mC(1);a.attrs(b);a.finish();a=this.domain.He({attrs:c.build()});this.qr(a)}write(a,b,c){c==null||Object.keys(c).length===0?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(b!=null&&(a=__c.Ap(this.ph,a,b),Object.keys(a).length!==0))return a}CU(){const a=this.domain.Xg();for(let b=0;b<=this.VA;b++){const c=a.Mx();let d={};for(let e=0;e<=this.Jq;e++){const f=this.grid.get(b,e);for(const g of $lb(d,f))c.yn(g,f&&f[g]);d=f;c.mC(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=
this.jc();ka(this.domain.ri(b,a))}fj(a){const b=this.jc(),c=Ip(this.domain);Plb(b,a,c,(d,e,f)=>e==null&&f==null?void 0:{o:e,n:f});this.qr(this.domain.He({attrs:c.build()}));return!0}N_(a){this.W2b(a.x);this.X2b(a.y);Zlb(this,a.attrs)}W2b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.yd();for(var c=a.head;c;)c.type===0?b+=a.fA(c.length):(c=Gp(a,c.length),hkb(this.grid,b,c),b+=c),c=a.head}}X2b(a){let b=0;a=a.yd();for(var c=a.head;c;)c.type===0?b+=a.fA(c.length):(c=Gp(a,c.length),ikb(this.grid,b,c),b+=c),
c=a.head}constructor(a,b,c){super();this.ph=a;this.domain=b;this.grid=new wnb;c.forEach(a.EC,(d,e,f)=>{Object.keys(f).length===0||this.grid.set(d,e,f)});ka(this.domain.ri(c,this.CU()))}},Vqb=class extends unb{Xg(){return this.domain.Xg()}iA(a){return new Uqb(this.ph,this.domain,a)}xn(a){return a}connect(a,b){return this.xn(a).connect(b)}jc(a){return this.xn(a).jc()}destroy(a,b){this.xn(a).destroy(b)}fj(a,b){return this.xn(a).fj(b)}constructor(){var a=__c.Rq;super();this.ph=a;this.domain=new Nqb(a.jDa)}};__c.Xqb=class{get Jq(){return this.grid.Jq}get VA(){return this.grid.VA}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,Pp(b,c,d.right,d.bottom))})}map(a){const b=new Wqb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(c!=null&&(c=c.cells[a],c!=null))return __c.amb(Pp(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.amb(c,b))});return a}yd(){return this.grid.yd()}constructor(a){this.grid=
a}};__c.Xqb.prototype.Jjc=da(134);
var Wqb=class{add(a,b){lmb(this.H4d,a);this.Ytd.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.Ytd.build();return a.isEmpty?Yqb:new __c.Xqb(a)}constructor(){this.Ytd=new Zqb;this.H4d=new $qb}},arb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},brb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Rp=class{add(a,b,c){if(c==
null)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=Pp(a,b,c.bounds.o.right,c.bounds.o.bottom);lmb(this.tkd,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=Pp(a,b,c.bounds.n.right,c.bounds.n.bottom),lmb(this.Cjd,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.aYa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=Pp(a,b,c.o.right,c.o.bottom),lmb(this.tkd,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=Pp(a,b,c.n.right,c.n.bottom),lmb(this.Cjd,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.aYa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.aYa.build()}constructor(){this.aYa=new Zqb;this.tkd=new $qb;this.Cjd=new $qb}},drb=class{get isEmpty(){return this.rows.length===0}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}yd(){return new crb(this.rows)}constructor(a,b,c){this.rows=
a;this.Jq=b;this.VA=c}},crb=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}qu(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;bmb(this);b.cells[this.x]==null&&(this.y++,this.x=0,cmb(this),bmb(this));return a}finish(){ka(this.head==null)}constructor(a){this.rows=a;this.x=this.y=0;cmb(this);bmb(this)}},Zqb=class{add(a,b,c,d,e){ja(a<=c);ja(b<=d);this.a8==null||this.a8.y<b?(this.flush(),this.rows.length&&ka(this.rows.length<=b),this.a8=
{y:b,Onc:d,cells:[]},this.a8.cells[a]=e):this.a8.y===b?(ka(this.a8.cells.length<=a),this.a8.Onc=Math.max(this.a8.Onc,d),this.a8.cells[a]=e):ka(this.a8.y>b);this.Jq=Math.max(this.Jq,c+1);this.VA=Math.max(this.VA,d+1);return this}flush(){if(this.a8){const {y:a,...b}=this.a8;this.rows[a]=b;this.a8=void 0}}build(){this.flush();return new drb(this.rows,this.Jq,this.VA)}constructor(){this.rows=[];this.VA=this.Jq=0}},Yqb=new __c.Xqb(new drb([],0,0)),erb=class extends eq{Xg(){return new Wqb}aP(){return Yqb}replace(a,
b){return new arb(a,b)}update(a,b){a=a==null||Qp(a.o,a.n)?void 0:a;b=b==null||this.component.isIdentity(b)?void 0:b;return a!=null||b!=null?new brb(a,b):void 0}He(a={}){const b=a.cells||(new Rp).build();return{x:a.x||Kp.Og().build(),y:a.y||Kp.Og().build(),cells:b,i1:a.i1||Sq.project(b)}}isIdentity(a){return Kp.isIdentity(a.x)&&Kp.isIdentity(a.y)&&a.cells.isEmpty&&Sq.isIdentity(a.i1)}compose(a,b){const c=dmb(this,a.cells,b.x,b.y),d=Sq.expand(a.i1,b.x,b.y);return{x:Kp.compose(a.x,b.x),y:Kp.compose(a.y,
b.y),cells:gmb(this,c,b.cells),i1:Sq.compose(d,b.i1)}}transform(a,b){const c=xo.Wr(),{ou:d,Pu:e}=Ao(c,Kp.transform(a.x,b.x)),{ou:f,Pu:g}=Ao(c,Kp.transform(a.y,b.y)),h=dmb(this,a.cells,d,f),k=dmb(this,b.cells,e,g);a=Sq.expand(a.i1,d,f);b=Sq.expand(b.i1,e,g);const {ou:l,Pu:n}=Ao(c,Sq.transform(a,b)),p=new $qb,q=Sq.cursor(a,Math.max(h.Jq,k.Jq),Math.max(h.VA,k.VA)),u=new Rp,w=new Rp;emb(h.yd(),k.yd(),(x,z,B,C)=>{if(B!=null||C!=null){a:if(B==null||C==null)var E=yo(C,B);else switch(B.type){case 1:b:{switch(C.type){case 1:E=
xo.Wr();const {ou:M,Pu:N}=B.delta&&C.delta?Ao(E,this.component.transform(B.delta,C.delta)):yo(C.delta,B.delta);if(B.bounds&&C.bounds){B=B.bounds;C=C.bounds;ka(Qp(B.o,C.o));const V={right:Math.min(B.n.right,C.n.right),bottom:Math.min(B.n.bottom,C.n.bottom)},X=xo.Wr();wjb(X,!Qp(C.n,V));xjb(X,!Qp(B.n,V));B=X.build({o:C.n,n:V},{o:B.n,n:V});B=Ao(E,B)}else B=yo(C.bounds,B.bounds);const {ou:T,Pu:U}=B;E=E.build(this.update(T,M),this.update(U,N));break b;case 0:ka(C.o!=null);B.bounds&&ka(Qp(B.bounds.o,C.o));
E=new xo(this.replace({...(B.bounds?B.bounds.n:C.o),state:B.delta?this.component.apply(C.o.state,B.delta):C.o.state},C.n),void 0,!1,!0);break b;default:throw new r(C);}E=void 0}break a;case 0:b:switch(C.type){case 1:ka(B.o!=null);C.bounds&&ka(Qp(B.o,C.bounds.o));E=zo(this.replace({...(C.bounds?C.bounds.n:B.o),state:C.delta?this.component.apply(B.o.state,C.delta):B.o.state},B.n));break b;case 0:ka(Sp(this,B.o,C.o));E=zo(this.replace(C.n,B.n));break b;default:throw new r(C);}break a;default:throw new r(B);
}var {ou:H,Pu:I}=Ao(c,E);H&&(E=jmb(this,x,z,H,p,q))&&(H=fmb(this,H,E),I=fmb(this,I,E),wjb(c));H&&w.add(x,z,H);I&&u.add(x,z,I)}});q.finish();return c.build({x:d,y:f,cells:w.build(),i1:l},{x:e,y:g,cells:u.build(),i1:n})}Dl(a){const b=new Rp;a.cells.forEach((d,e,f)=>{if(f!=null)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.Dl(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:Kp.Dl(a.x),
y:Kp.Dl(a.y),cells:c,i1:Sq.project(c)}}lk(a,b){var c;if(c=Kp.lk(a.x,b.x)&&Kp.lk(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.Jq!==d.Jq||c.VA!==d.VA)c=!1;else{c=c.yd();d=d.yd();for(var e=c.head,f=d.head;e||f;){var g;(g=e==null)||(g=f==null)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(e==null||f==null?e===f:e.type===0&&f.type===0?Sp(this,e.o,f.o)&&Sp(this,e.n,f.n):e.type===1&&f.type===1&&(e.bounds&&f.bounds?Qp(e.bounds.o,f.bounds.o)&&Qp(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&
f.delta?this.component.lk(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.qu();d.qu();e=c.head;f=d.head}c=!0}}return c&&Sq.lk(a.i1,b.i1)}identity(){return this.He()}apply(a,b){a=this.oIa(a,b.x,b.y);const c=this.Xg();emb(a.yd(),b.cells.yd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ka(f!=null),c.add(Pp(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ka(f!=null);g.bounds&&ka(Qp(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,
g.delta):f.state);break;case 0:g.o&&(ka(f!=null),ka(Sp(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}oIa(a,b,c){if(Kp.isIdentity(b)&&Kp.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Hp(b,d),g=Hp(c,e),h=new Wqb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};
h.add(l,k)});return h.build()}Rl(a,b){const c=this.Xg();emb(a.yd(),b.cells.yd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ka(f!=null),c.add(Pp(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ka(f!=null);g.bounds&&ka(Qp(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Rl(f.state,g.delta):f.state);break;case 0:g.n&&(ka(f!=null),ka(Sp(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.pVb(c.build(),
b.x,b.y)}pVb(a,b,c){if(Kp.isIdentity(b)&&Kp.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=Llb(b,d),g=Llb(c,e),h=new Wqb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}ri(a,b){if(a===b)return!0;a=a.yd();b=b.yd();let c=a.head,d=b.head;for(;c||d;){if(c==null||d==null||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||
c.value.right!==d.value.right||!this.component.ri(c.value.state,d.value.state))return!1;a.qu();b.qu();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof erb&&this.component.equals(a.component)}constructor(a){super();this.component=a}},$qb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){ka(!this.readBuffer(c,b));const {JFd:d,NFd:e}=mmb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {JFd:c,NFd:d}=mmb(this,a,
b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.Zta=this.Eea=0}},frb=class extends eq{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.b9a.Xg();Plb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return yo(b,a)}Dl(a){return a}lk(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Rl(a){return a}ri(a,b){return a===b}equals(a){return this===a||a instanceof frb}Og(){return new grb(()=>
this.b9a.Xg(),a=>ujb(this,a))}cursor(a,b,c){return new hrb(a,b,c)}project(a){const b=this.Og();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(Pp(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(Pp(c,d,e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.b9a.He({x:nmb(b),y:nmb(c)});return this.b9a.apply(a,b)}constructor(){super();this.b9a=new Nqb((a,b,c)=>b===c);this.id=this.b9a.Xg().build()}},grb=class{add(a){const b=this.aYa(),c=
a.left*2,d=a.top*2,e=a.right*2;a=a.bottom*2;b.rows(d);b.Mx().mC(c).attrs({value:!0}).mC(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.Mx().mC(c).attrs({value:void 0}).mC(e-c+1).attrs({value:void 0}).finish();this.TU.push(b.build());return this}build(){return this.TU.length?this.reduce(this.TU):this.aYa().build()}constructor(a,b){this.aYa=a;this.reduce=b;this.TU=[]}},hrb=class{get yi(){ka(this.Ela%2===0);return this.Ela/2}Mx(){ka(this.GEa===0);this.sT=this.yd.Mx();return this}get value(){ka(this.sT!=
null);return this.sT.attrs.value}s7b(a){ka(this.sT!=null);for(var b=this.sT.head;b!=null;){if(b.type===0)this.sT.nw();else if(b=this.sT.zo(b.length),this.Ela%2===0&&this.sT.attrs.value)for(let c=0;c<b;c++)this.GEa%2===0&&a(this.GEa/2,this.Ela/2),this.GEa++;else this.GEa+=b;b=this.sT.head}return this}Cdb(){for(ka(this.sT!=null);this.sT.head;)this.sT.head.type===0?this.sT.nw():this.sT.zo(this.sT.head.length);this.sT.finish();this.sT=void 0;this.GEa=0;return this}finish(){hmb(this,this.yd.VA);this.yd.head&&
(this.Mx(),this.Cdb());this.yd.finish()}constructor(a,b,c){this.GEa=this.Ela=0;this.yd=a.yd(void 0,b*2,c*2)}},Sq=new frb;var krb=class extends hq{get(a,b){a=this.grid.get(a,b);if(a!=null)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.uKa.left===d&&b.uKa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Rp).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.qr(this.domain.compose(omb(this,a),this.domain.He({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.qr(omb(this,a))}createRef(a,b){var c=this.grid;var d={left:gkb(this.grid,b.left),top:fkb(this.grid,
b.top),right:gkb(this.grid,b.right),bottom:fkb(this.grid,b.bottom)};c=new irb(c,d);d=Lo(this,pmb(this,c));const {mutable:e,Gx:f}=Mo(this.type,a,d);a=new jrb(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}G9b(a,b,c){ka(a.span.left===c.left);ka(a.span.top===c.top);ka(a.span.right===c.right);ka(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)ka(this.grid.get(d,e)===a),this.grid.delete(d,e);No(this.type,b,a.to,a.value)}N_(a){this.W2b(a.x);
this.X2b(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){ka(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;ka(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)ka(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=f;g++)ka(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.uKa.right=gkb(this.grid,d);e.uKa.bottom=fkb(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),ka(e.span.left===b&&e.span.top===c),ka(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.G9b(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)ka(this.grid.get(e,h)==null),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)ka(this.grid.get(f,b)==null),this.grid.set(f,b,g);g.uKa.right=gkb(this.grid,d.right);g.uKa.bottom=fkb(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}W2b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.yd();for(var c=a.head;c;)c.type===0?b+=a.fA(c.length):
(c=Gp(a,c.length),hkb(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}X2b(a){let b=0;a=a.yd();for(var c=a.head;c;)c.type===0?b+=a.fA(c.length):(c=Gp(a,c.length),ikb(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}CU(){const a=this.domain.Xg();for(let b=0;b<this.grid.VA;b++)for(let c=0;c<this.grid.Jq;c++){const d=this.grid.get(b,c);d!=null&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.jc(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.VA;d++)for(let e=
0;e<this.grid.Jq;e++){const f=this.grid.get(d,e);if(f==null||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));ka(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}ka(c===b)}fj(a){const b=new Rp,c=new Rp;for(let d=0;d<this.grid.VA;d++)for(let e=0;e<this.grid.Jq;e++){const f=this.grid.get(d,e);f!=null&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.jc(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.qr(this.domain.compose(this.domain.He({cells:b.build()}),this.domain.He({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new wnb;c.forEach((d,e)=>{this.createRef(d,e)})}},jrb=class{get span(){return this.uKa.$md.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.uKa=d}},irb=class{get right(){return this.YPc.get()}set right(a){this.YPc.set(a)}get bottom(){return this.DPc.get()}set bottom(a){this.DPc.set(a)}constructor(a,
b){this.kGb=a;this.$md=bp(()=>({left:m(this.kGb.H6b.get(this.left)),top:m(this.kGb.Uyc.get(this.top)),right:m(this.kGb.H6b.get(this.right)),bottom:m(this.kGb.Uyc.get(this.bottom))}),{equals:__c.Nmb.structural});this.left=b.left;this.top=b.top;this.YPc=new iq(b.right);this.DPc=new iq(b.bottom)}},lrb=class extends gq{iA(a){return new krb(this.type,this.domain,a)}xn(a){return a}connect(a,b){return this.xn(a).connect(b)}jc(a){return this.xn(a).jc()}destroy(a,b){return this.xn(a).destroy(b)}fj(a,b){return this.xn(a).fj(b)}constructor(a){super(fq,
fq);this.type=a;this.domain=new erb(this.type.domain)}};var mrb,nrb,Tp,qmb,Tq,orb,prb,qrb;mrb=new Map;nrb=class{ordinal(a,b){b!=null?this.W7a.set(a,b):this.W7a.delete(a);return this}zk(a){a.forEach((b,c)=>this.W7a.set(c,b));return this}build(){return this.W7a.size?this.W7a:mrb}constructor(){this.W7a=new Map}};Tp=class{toString(){var a,b;return`R(${(a=this.oldValue)!==null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
qmb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Tq=class{static create(a,b){const c=Kp.isIdentity(a),d=b.size===0;return c&&d?orb:new Tq(c?orb.axis:a,d?orb.zk:b)}toString(){const a=[...this.zk].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.zk=b}};orb=new Tq(Kp.Og().build(),new Map);
prb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Tq.create(this.axis.build(),this.zk)}constructor(){this.zk=new Map;this.axis=Kp.Og()}};
qrb=class extends eq{Xg(){return new nrb}Og(){return new prb}replace(a,b,c){return Up(this.Og(),a,b,c).build()}update(a,b,c){return rmb(this.Og(),a,b,c).build()}He(a,b){return Tq.create(a,b)}isIdentity(a){return Kp.isIdentity(a.axis)&&!a.zk.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=tmb(a.zk,b.axis),d=new Map;for(const h of smb(c,b.zk)){var e=c.get(h);const k=b.zk.get(h);if(e&&k){var f=d,g=f.set;a:{po(e.newValue,k.oldValue);switch(e.type){case 0:e=new Tp(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new Tp(e.oldValue,k.newValue);break a;case 1:e=new qmb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}e=void 0}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Tq.create(Kp.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return yo(b,a);const c=xo.Wr(),{ou:d,Pu:e}=Ao(c,Kp.transform(a.axis,b.axis));a=tmb(a.zk,d);const f=tmb(b.zk,e);b=new Map;const g=new Map;for(var h of smb(a,f)){var k=
a.get(h);const l=f.get(h);if(k&&l){a:{po(k.oldValue,l.oldValue);switch(k.type){case 0:k=zo(new Tp(l.newValue,k.newValue));break a;case 1:switch(l.type){case 0:k=new xo(new Tp(k.newValue,l.newValue),void 0,!1,!0);break a;case 1:k=zo(new qmb(l.newValue,k.newValue));break a;default:throw new r(l);}default:throw new r(k);}k=void 0}const {ou:n,Pu:p}=Ao(c,k);p&&b.set(h,p);n&&g.set(h,n)}else k?b.set(h,k):l&&g.set(h,l)}h=Tq.create(d,g);a=Tq.create(e,b);return c.build(h,a)}Dl(a){const b=a.zk.size===0?a.zk:
Og(a.zk,c=>{switch(c.type){case 0:return new Tp(c.newValue,c.oldValue);case 1:return new qmb(c.newValue,c.oldValue);default:throw new r(c);}});return Tq.create(Kp.Dl(a.axis),b)}lk(a,b){if(a===b)return!0;if(!Kp.lk(a.axis,b.axis)||a.zk.size!==b.zk.size)return!1;for(const e of a.zk.keys()){var c=a.zk.get(e),d=b.zk.get(e);if(c!==d&&(c==null||d==null||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return orb}apply(a,b){if(this.isIdentity(b)||!a.size&&!b.zk.size)return a;
a=this.oIa(a,b.axis);if(!b.zk.size)return a;const c=new Map(a);for(const [d,e]of b.zk)b=a.get(d),po(b,e.oldValue),e.newValue!=null?c.set(d,e.newValue):c.delete(d);return c}oIa(a,b){if(Kp.isIdentity(b))return a;const c=new Set(a.values()),d=Hp(b,c);return Og(a,e=>m(d.get(e)))}Rl(a,b){if(this.isIdentity(b)||!a.size&&!b.zk.size)return a;if(!b.zk.size)return this.pVb(a,b.axis);const c=new Map(a);for(const [d,e]of b.zk){const f=a.get(d);po(f,e.newValue);e.oldValue!=null?c.set(d,e.oldValue):c.delete(d)}return this.pVb(c,
b.axis)}pVb(a,b){if(Kp.isIdentity(b))return a;const c=new Set(a.values()),d=Llb(b,c);return Og(a,e=>m(d.get(e)))}ri(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof qrb}constructor(){super();this.aP=mrb}};Xp=__c.Xp=new qrb;var rrb=new Map,Wp=class{static from(a){if(a instanceof Wp)return a;if(Array.isArray(a)){const [b,c]=a;return new Wp(b,c)}return new Wp(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},srb=class{range(a,b){b?this.c$.set(a,Wp.from(b)):this.c$.delete(a);return this}Xe(a){a.forEach((b,c)=>this.c$.set(c,Wp.from(b)));return this}build(){return this.c$.size?this.c$:rrb}constructor(){this.c$=new Map}},ymb=class{toString(){var a,b;return`R(${(a=this.oldValue)!==
null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},Yp=class{static from(a){if(a instanceof Yp)return a;if(Array.isArray(a)){const [b,c]=a;return new Yp(b,c)}return new Yp(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},zmb=class{toString(){var a,b;return`U(${(a=this.start)!==null&&a!==void 0?a:"_"},${(b=this.end)!==null&&b!==void 0?
b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},Amb=class{static create(a,b){const c=Kp.isIdentity(a),d=b.size===0;return c&&d?trb:new Amb(c?trb.axis:a,d?trb.Xe:b)}toString(){return`{${this.axis}|${[...this.Xe].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.Xe=b}},trb=new Amb(Kp.Og().build(),new Map),urb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}z2a(a,b,c){this.Xe.set(a,new ymb(b&&Wp.from(b),c&&Wp.from(c)));
return this}createRange(a,b){return this.z2a(a,void 0,b)}build(){return Amb.create(this.axis.build(),this.Xe)}constructor(){this.Xe=new Map;this.axis=Kp.Og()}},Uq,vrb;ka(!0);Uq=Xp.map(Bmb,xmb,wmb,vmb);
vrb=class extends eq{Xg(){return new srb}Og(){return new urb}replace(a,b,c){return this.Og().z2a(a,b,c).build()}update(a,b,c){var d=this.Og();d.Xe.set(a,new zmb(b&&Yp.from(b),c&&Yp.from(c)));return d.build()}He(a,b){return Amb.create(a,b)}isIdentity(a){return Uq.isIdentity(a)}compose(a,b){return Uq.compose(a,b)}transform(a,b){return Uq.transform(a,b)}Dl(a){return Uq.Dl(a)}lk(a,b){return Uq.lk(a,b)}identity(a){return Uq.identity(a)}apply(a,b){return Uq.apply(a,b)}Rl(a,b){return Uq.Rl(a,b)}ri(a,b){return Uq.ri(a,
b)}equals(a){return Uq.equals(a)}constructor(){super();this.aP=rrb}};Vq=__c.Vq=new vrb;var wrb=class extends eq{He(a){return{rows:a.rows||this.rows.Og().build(),cols:a.cols||this.cols.Og().build(),Jo:a.Jo||Vq.Og().build().Xe,Io:a.Io||Xp.Og().build().zk,uo:a.uo||Vq.Og().build().Xe,Pn:a.Pn||Xp.Og().build().zk,cells:a.cells||$p(this.cells.He({}),this.cols.Og().build(),this.rows.Og().build()),attrs:a.attrs||$p(this.attrs.He({}),this.cols.Og().build(),this.rows.Og().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&a.Jo.size===0&&a.Io.size===0&&a.uo.size===
0&&a.Pn.size===0&&a.cells.cells.isEmpty&&Sq.isIdentity(a.cells.i1)&&a.attrs.attrs.items.isEmpty()}compose(a,b){const c=Zp(a.cols),d=Zp(a.rows),e=Zp(b.cols),f=Zp(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=Vq.compose(Vq.He(d,a.Jo),Vq.He(f,b.Jo)).Xe,l=Xp.compose(Xp.He(d,a.Io),Xp.He(f,b.Io)).zk,n=Vq.compose(Vq.He(c,a.uo),Vq.He(e,b.uo)).Xe,p=Xp.compose(Xp.He(c,a.Pn),Xp.He(e,b.Pn)).zk,q=this.cells.compose(this.cells.He({...a.cells,x:c,y:d}),this.cells.He({...b.cells,
x:e,y:f}));a=this.attrs.compose(this.attrs.He({...a.attrs,x:c,y:d}),this.attrs.He({...b.attrs,x:e,y:f}));return{rows:g,cols:h,Jo:k,Io:l,uo:n,Pn:p,cells:$p(q,h,g),attrs:$p(a,h,g)}}transform(a,b){const c=Zp(a.cols),d=Zp(a.rows),e=Zp(b.cols),f=Zp(b.rows),g=xo.Wr(),{ou:h,Pu:k}=Ao(g,this.rows.transform(a.rows,b.rows)),{ou:l,Pu:n}=Ao(g,this.cols.transform(a.cols,b.cols)),{ou:{Xe:p},Pu:{Xe:q}}=Ao(g,Vq.transform(Vq.He(d,a.Jo),Vq.He(f,b.Jo))),{ou:{zk:u},Pu:{zk:w}}=Ao(g,Xp.transform(Xp.He(d,a.Io),Xp.He(f,b.Io))),
{ou:{Xe:x},Pu:{Xe:z}}=Ao(g,Vq.transform(Vq.He(c,a.uo),Vq.He(e,b.uo))),{ou:{zk:B},Pu:{zk:C}}=Ao(g,Xp.transform(Xp.He(c,a.Pn),Xp.He(e,b.Pn))),{ou:E,Pu:H}=Ao(g,this.cells.transform(this.cells.He({...a.cells,x:c,y:d}),this.cells.He({...b.cells,x:e,y:f}))),{ou:I,Pu:M}=Ao(g,this.attrs.transform(this.attrs.He({...a.attrs,x:c,y:d}),this.attrs.He({...b.attrs,x:e,y:f})));a={rows:h,cols:l,Jo:p,Io:u,uo:x,Pn:B,cells:$p(E,l,h),attrs:$p(I,l,h)};b={rows:k,cols:n,Jo:q,Io:w,uo:z,Pn:C,cells:$p(H,n,k),attrs:$p(M,n,k)};
return g.build(a,b)}Dl(a){const b=Zp(a.cols),c=Zp(a.rows),d=this.rows.Dl(a.rows),e=this.cols.Dl(a.cols),f=Vq.Dl(Vq.He(c,a.Jo)).Xe,g=Xp.Dl(Xp.He(c,a.Io)).zk,h=Vq.Dl(Vq.He(b,a.uo)).Xe,k=Xp.Dl(Xp.He(b,a.Pn)).zk,l=this.cells.Dl({...a.cells,x:b,y:c});a=this.attrs.Dl(this.attrs.He({...a.attrs,x:b,y:c}));return{rows:d,cols:e,Jo:f,Io:g,uo:h,Pn:k,cells:$p(l,e,d),attrs:$p(a,e,d)}}lk(a,b){return this.rows.lk(a.rows,b.rows)&&this.cols.lk(a.cols,b.cols)&&Vq.lk(Vq.He(Kp.identity(),a.Jo),Vq.He(Kp.identity(),b.Jo))&&
Xp.lk(Xp.He(Kp.identity(),a.Io),Xp.He(Kp.identity(),b.Io))&&Vq.lk(Vq.He(Kp.identity(),a.uo),Vq.He(Kp.identity(),b.uo))&&Xp.lk(Xp.He(Kp.identity(),a.Pn),Xp.He(Kp.identity(),b.Pn))&&this.cells.lk(this.cells.He(a.cells),this.cells.He(b.cells))&&this.attrs.lk(this.attrs.He(a.attrs),this.attrs.He(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),Jo:Vq.identity(a.Jo).Xe,Io:Xp.identity(a.Io).zk,uo:Vq.identity(a.uo).Xe,Pn:Xp.identity(a.Pn).zk,cells:this.cells.identity(a.cells),
attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=Zp(b.cols),d=Zp(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=Vq.apply(a.Jo,Vq.He(d,b.Jo)),h=Xp.apply(a.Io,Xp.He(d,b.Io)),k=Vq.apply(a.uo,Vq.He(c,b.uo)),l=Xp.apply(a.Pn,Xp.He(c,b.Pn)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.He({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Jo:g,Io:h,uo:k,Pn:l,cells:n,attrs:a}}Rl(a,b){if(this.isIdentity(b))return a;
const c=Zp(b.cols),d=Zp(b.rows),e=this.rows.Rl(a.rows,b.rows),f=this.cols.Rl(a.cols,b.cols),g=Vq.Rl(a.Jo,Vq.He(d,b.Jo)),h=Xp.Rl(a.Io,Xp.He(d,b.Io)),k=Vq.Rl(a.uo,Vq.He(c,b.uo)),l=Xp.Rl(a.Pn,Xp.He(c,b.Pn)),n=this.cells.Rl(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Rl(a.attrs,this.attrs.He({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Jo:g,Io:h,uo:k,Pn:l,cells:n,attrs:a}}ri(a,b){return a===b?!0:this.rows.ri(a.rows,b.rows)&&Vq.ri(a.Jo,b.Jo)&&Xp.ri(a.Io,b.Io)&&Vq.ri(a.uo,b.uo)&&Xp.ri(a.Pn,b.Pn)&&this.cols.ri(a.cols,
b.cols)&&this.cells.ri(a.cells,b.cells)&&this.attrs.ri(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof wrb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var xrb=class extends hq{static F(a){gb(a,{xdd:bp})}get xdd(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return bq(this,this.refs.get(a))}forEach(a){for(const [b,c]of this.refs)a(bq(this,c),b)}create(a,b){a=this.domain.replace(a,this.get(a),b);this.qr(a)}update(a,b){const c=m(bq(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.qr(a)}delete(a){const b=bq(this,this.refs.get(a));b!=null&&(a=this.domain.replace(a,b,void 0),this.qr(a))}CU(){const a=this.domain.Xg();for(const [b,
c]of this.refs)a.ordinal(b,bq(this,c));return a.build()}destroy(a){ka(this.refs.size===a.size);for(const [b,c]of this.refs)ka(a.has(b)),ka(bq(this,c)===a.get(b))}fj(a){const b=this.domain.Og();for(const [c,d]of this.refs){const e=bq(this,d),f=a.get(c);Up(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||Up(b,c,void 0,d);this.qr(b.build());return!0}N_(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.yd();for(var d=b.head;d;)d.type===
0?c+=b.fA(d.length):(d=Gp(b,d.length),this.items.spliceWithArray(c,0,Array(d)),c+=d),d=b.head}for(const [e,f]of a.zk)switch(f.type){case 0:f.oldValue!=null?(a=m(this.refs.get(e)),c=Cmb(this,f.oldValue),ja(a===c)):ja(!this.refs.has(e));f.newValue!=null?this.refs.set(e,Cmb(this,f.newValue)):this.refs.delete(e);break;case 1:a=m(this.refs.get(e));c=Cmb(this,f.oldValue);ja(a===c);this.refs.set(e,Cmb(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();this.domain=(xrb.F(this),Xp);this.items=
dq.array([],{deep:!1});this.refs=dq.map(new Map,{deep:!1});for(const [b,c]of a)this.refs.set(b,Cmb(this,c))}},yrb=class extends gq{iA(a){return new xrb(a)}xn(a){return a}connect(a,b){return this.xn(a).connect(b)}jc(a){return this.xn(a).jc()}destroy(a,b){return this.xn(a).destroy(b)}fj(a,b){return this.xn(a).fj(b)}constructor(){super(fq,Jo);this.domain=__c.Xp}},Wq=new yrb;var zrb=class{create(a,b){a=Vp(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(c==null&&d==null){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.Og();for(const [e,f]of b)Up(a,e,c.get(e),f);c.qr(a.build())}}get(a){var b=Vp(a);a=this.base.get(b.start);b=this.base.get(b.end);if(a!=null&&b!=null)return{start:a,end:Math.max(a,b)}}forEach(a){const b=new Set;this.base.forEach((c,d)=>{c=umb(d);b.has(c)||(b.add(c),d=m(this.get(c)),a(d,c))})}delete(a){var b=Vp(a);a=this.base;
var c=new Set([b.start,b.end]);b=a.domain.Og();for(const d of c)c=a.get(d),c!=null&&Up(b,d,c);a.qr(b.build())}constructor(a){this.base=a}},Arb=Wq.map(Bmb,xmb,wmb,vmb,a=>new zrb(a),a=>a.base),Brb=class extends unb{iA(a){a=Wq.iA(vmb(a));return new zrb(a)}connect(a,b){return Arb.connect(a,b)}jc(a){return Arb.jc(a)}destroy(a,b){return Arb.destroy(a,b)}fj(a,b){return Arb.fj(a,b)}constructor(){super();this.domain=__c.Vq}},Xq=new Brb;var Grb,Erb,Frb,Crb,Drb;
Grb=class extends hq{CU(){return{rows:this.FQb.jc(this.rows),cols:this.Gyb.jc(this.cols),Jo:Xq.jc(this.Jo.Xe),Io:Wq.jc(this.Io.zk),uo:Xq.jc(this.uo.Xe),Pn:Wq.jc(this.Pn.zk),cells:this.Zxb.jc(this.cells.grid),attrs:this.xwb.jc(this.attrs.grid)}}destroy(a){No(this.FQb,a.rows,this.uBd,this.rows);No(this.Gyb,a.cols,this.kBd,this.cols);No(Xq,a.Jo,this.nFc,this.Jo.Xe);No(Wq,a.Io,this.mFc,this.Io.zk);No(Xq,a.uo,this.jFc,this.uo.Xe);No(Wq,a.Pn,this.iFc,this.Pn.zk);No(this.Zxb,a.cells,this.AUb,this.cells.grid);
No(this.xwb,a.attrs,this.zUb,this.attrs.grid)}fj(a){return this.FQb.fj(this.rows,a.rows)&&this.Gyb.fj(this.cols,a.cols)&&Xq.fj(this.Jo.Xe,a.Jo)&&Wq.fj(this.Io.zk,a.Io)&&Xq.fj(this.uo.Xe,a.uo)&&Wq.fj(this.Pn.zk,a.Pn)&&this.Zxb.fj(this.cells.grid,a.cells)&&this.xwb.fj(this.attrs.grid,a.attrs)}N_(a){const b=Zp(a.rows),c=Zp(a.cols);this.uBd.next(a.rows);this.kBd.next(a.cols);this.nFc.next(Vq.He(b,a.Jo));this.mFc.next(Xp.He(b,a.Io));this.jFc.next(Vq.He(c,a.uo));this.iFc.next(Xp.He(c,a.Pn));this.AUb.next(this.domain.cells.He({...a.cells,
y:b,x:c}));this.zUb.next(this.domain.attrs.He({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.FQb=a;this.Gyb=b;this.Zxb=c;this.xwb=d;this.domain=e;this.C8=g=>this.rows.has(g)?this.rows.PG(g):void 0;this.E5=g=>this.cols.has(g)?this.cols.PG(g):void 0;this.AYa=g=>this.rows.get(g);this.zYa=g=>this.cols.get(g);this.zoe=Lo(this,g=>{const h=Zp(g);Kp.isIdentity(h)||(this.AUb.next(this.domain.cells.He({y:h})),this.zUb.next(this.domain.attrs.He({y:h})),this.mFc.next(Xp.He(h,new Map)),this.nFc.next(Vq.He(h,
new Map)));return this.domain.He({rows:g})});a=Mo(this.FQb,f.rows,this.zoe);this.rows=a.mutable;this.uBd=a.Gx;this.uoe=Lo(this,g=>{const h=Zp(g);Kp.isIdentity(h)||(this.AUb.next(this.domain.cells.He({x:h})),this.zUb.next(this.domain.attrs.He({x:h})),this.iFc.next(Xp.He(h,new Map)),this.jFc.next(Vq.He(h,new Map)));return this.domain.He({cols:g})});a=Mo(this.Gyb,f.cols,this.uoe);this.cols=a.mutable;this.kBd=a.Gx;this.xoe=Lo(this,g=>{ja(Kp.isIdentity(g.axis));return this.domain.He({Io:g.zk})});a=Mo(Wq,
f.Io,this.xoe);this.Io=new Crb(a.mutable,this.C8,this.AYa);this.mFc=a.Gx;this.yoe=Lo(this,g=>{ja(Kp.isIdentity(g.axis));return this.domain.He({Jo:g.Xe})});a=Mo(Xq,f.Jo,this.yoe);this.Jo=new Drb(a.mutable,this.C8,this.AYa);this.nFc=a.Gx;this.soe=Lo(this,g=>{ja(Kp.isIdentity(g.axis));return this.domain.He({Pn:g.zk})});a=Mo(Wq,f.Pn,this.soe);this.Pn=new Crb(a.mutable,this.E5,this.zYa);this.iFc=a.Gx;this.toe=Lo(this,g=>{ja(Kp.isIdentity(g.axis));return this.domain.He({uo:g.Xe})});a=Mo(Xq,f.uo,this.toe);
this.uo=new Drb(a.mutable,this.E5,this.zYa);this.jFc=a.Gx;this.roe=Lo(this,g=>{ja(Kp.isIdentity(g.x));ja(Kp.isIdentity(g.y));return this.domain.He({cells:g})});a=Mo(this.Zxb,f.cells,this.roe);this.cells=new Erb(a.mutable,this.C8,this.E5,this.AYa,this.zYa);this.AUb=a.Gx;this.poe=Lo(this,g=>{ja(Kp.isIdentity(g.x));ja(Kp.isIdentity(g.y));return this.domain.He({attrs:g})});f=Mo(this.xwb,f.attrs,this.poe);this.attrs=new Frb(f.mutable,this.C8,this.E5);this.zUb=f.Gx}};
Erb=class{get(a,b){a=this.C8(a);b=this.E5(b);if(a!=null&&b!=null&&(b=this.grid.get(a,b),b!=null))return{span:{Qg:m(Dmb(this,b.span)),Jg:m(Emb(this,b.span)),rl:m(Fmb(this,b.span)),qk:m(Gmb(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=Dmb(this,c),e=Emb(this,c);d!=null&&e!=null&&a(b,{Qg:d,Jg:e,rl:m(Fmb(this,c)),qk:m(Gmb(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(Hmb(this,a),b);return m(this.get(a.Qg,a.Jg))}delete(a){this.grid.delete(Hmb(this,
a))}constructor(a,b,c,d,e){this.grid=a;this.C8=b;this.E5=c;this.AYa=d;this.zYa=e}};Frb=class{get(a,b,c){b=this.C8(b);c=this.E5(c);if(b!=null&&c!=null)return this.grid.get(a,b,c)}set(a,b,c){const d=this.C8(b.Qg),e=this.E5(b.Jg),f=this.C8(b.rl||b.Qg);b=this.E5(b.qk||b.Jg);d!=null&&e!=null&&f!=null&&b!=null&&this.grid.set(a,{z3e:d,m3e:e,lCb:f,jje:b},c)}constructor(a,b,c){this.grid=a;this.C8=b;this.E5=c}};
Crb=class{get(a){a=this.zk.get(a);if(a!=null)for(;a>=0;a--){const b=this.lGb(a);if(b)return b}}forEach(a){this.zk.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){b=m(this.BIb(b));this.zk.create(a,b)}delete(a){this.zk.delete(a)}constructor(a,b,c){this.zk=a;this.BIb=b;this.lGb=c}};
Drb=class{get(a){a=this.Xe.get(a);if(a!=null){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.lGb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.lGb(c);if(d){a=d;break a}}a=void 0}if(b!=null&&a!=null)return{start:b,end:a}}}forEach(a){this.Xe.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){const c=m(this.BIb(b.start));b=m(this.BIb(b.end));this.Xe.create(a,{start:c,end:b})}delete(a){this.Xe.delete(a)}constructor(a,b,c){this.Xe=a;this.BIb=b;this.lGb=c}};
__c.Krb=class extends gq{iA(a){return new Grb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}xn(a){return a}connect(a,b){return this.xn(a).connect(b)}jc(a){return this.xn(a).jc()}destroy(a,b){this.xn(a).destroy(b)}fj(a,b){return this.xn(a).fj(b)}constructor(a){var b=Hrb,c=Irb,d=__c.Jrb;super(fq,fq);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new wrb(b.domain,c.domain,a.domain,d.domain)}};__c.Krb.prototype.gB=da(113);__c.Lrb=class{static parse(a){a==="dd mmm yyyy"&&(a="dd MMM yyyy");const b=new __c.Lrb;if((a=b.u5e(a))&&a.s===""&&b.isValid())return a.value}isValid(){return this.e9b<=1&&this.Ioc<=1&&this.rLc<=1&&this.e9b+this.Ioc+this.rLc!==0}qu(a){return b=>{var c=a.exec(b);if(c&&c.index===0)return[c]=c,{s:b.substring(c.length),value:[{type:0,value:c}]}}}compose(a,...b){return c=>{const d=[];for(const e of b){const f=e(c);if(!f)return;c=f.s;d.push(...f.value)}return{s:c,value:a(...d)}}}constructor(){this.rLc=this.Ioc=
this.e9b=0;this.sbe=this.compose(a=>{a=a.value;this.e9b++;ka(a==="d"||a==="dd");return[{type:1,value:a}]},this.qu(/^d{1,2}(?!d)/));this.gHe=this.compose(a=>{a=a.value;this.Ioc++;switch(a){case "M":case "MM":case "MMM":case "MMMM":return[{type:1,value:a}];default:ka(!1)}},this.qu(/^M{1,4}(?!M)/));this.Fdf=this.compose(a=>{a=a.value;this.rLc++;ka(a==="yyyy"||a==="yy");return[{type:1,value:a}]},this.qu(/^(yyyy|yy)(?!y)/));this.C_c=this.qu(/^"/);this.IQe=this.qu(/^[^\\"]+/);this.separator=this.qu(/^[^a-zA-Z\\"]+/);
this.symbol=Imb(this.sbe,this.gHe,this.Fdf);this.wIe=Jmb(Imb(this.symbol,this.separator));this.u5e=Jmb(Imb(this.compose((a,b)=>[b],this.C_c,this.IQe,this.C_c),this.wIe))}};var Mrb,Nrb,Orb,Prb,Qrb,Rrb,Srb,Trb,Urb,Vrb,Wrb,Xrb,Yrb,Zrb,$rb,dsb,esb,fsb,gsb,hsb,jsb,lsb,msb,nsb,osb,psb,qsb,rsb,ssb,tsb,usb,vsb,wsb,ysb,zsb,Asb,Bsb,Csb,Dsb,Esb,Gsb,Hsb,Isb,Ksb,Lsb,Msb,Osb,Psb,Hrb,Irb,Qsb,Rsb,Ssb,Tsb,Usb,Vsb,Wsb,Xsb,Ysb,Zsb,$sb,etb,ftb,gtb,htb,itb,ktb,mtb;Mrb=Ro({sf:Qo(lq)});Nrb=To(/^([A-Z]+|[1-9]\d*)$/);Orb=To(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*)$/);Prb=Ro({type:Po("single-row"),Ija:kq,Tmb:Nrb});Qrb=Ro({type:Po("single-column"),jGa:kq,Tmb:Nrb});
Rrb=Ro({type:Po("range-row"),nOa:kq,Tmb:Orb});Srb=Ro({type:Po("range-column"),kGa:kq,Tmb:Orb});Trb=Qo(__c.So({"single-row":Prb,"single-column":Qrb,"range-row":Rrb,"range-column":Srb},a=>a.type));Urb=Ro({type:Po("canonical"),$9a:kq,Rb:Trb});Vrb=Ro({type:Po("invalid"),Uwc:kq});Wrb=ap(Ro({type:Po("formula"),value:__c.So({canonical:Urb,invalid:Vrb},a=>a.type)}));Xrb=ap(Ro({type:Po("boolean"),value:jq}));Yrb=Oo(a=>a.length<=20&&__c.Lrb.parse(a)!=null);
Zrb=ap(Ro({type:Po("number"),value:Oo(a=>Number.isFinite(a)&&(Math.abs(a)>=2.2250738585072014E-308||Object.is(a,0)))}));$rb=ap(Ro({type:Po("plaintext"),value:kq}));__c.asb=dp({attributes:{P$:Zo(Cpb)},Rb:{fill:__c.Nq}});__c.bsb=gp(__c.asb);__c.csb=dp({values:{type:Po("media")},Rb:{value:__c.bsb}});dsb=gp(ap(Hpb));esb=dp({values:{type:Po("mention")},Rb:{value:dsb}});fsb=Ro({embed:Ipb});gsb=gp(ap(fsb));hsb=dp({values:{type:Po("embed")},Rb:{value:gsb}});__c.isb=new __c.Jq;
jsb=dp({values:{type:Po("text2")},attributes:{kd:Xo(Mrb)},Rb:{value:__c.isb}});__c.ksb=new __c.Jq;lsb=dp({values:{type:Po("text3")},Rb:{value:__c.ksb}});msb={formula:Wrb,boolean:Xrb,number:Zrb,plaintext:$rb,media:__c.csb,mention:esb,embed:hsb};nsb=vp(msb,a=>a.type,a=>a.type);osb=vp({...msb,text2:jsb},a=>a.type,a=>a.type);psb=vp({...msb,text3:lsb},a=>a.type,a=>a.type);qsb=vp({...msb,text2:jsb},a=>a.type,a=>a.type);rsb=Ro({type:Po("plain"),format:kq});ssb=Ro({type:Po("currency"),format:kq});
tsb=Ro({type:Po("percentage"),format:kq});usb=Ro({type:Po("date"),format:Yrb});vsb=__c.So({plain:rsb,currency:ssb,percentage:tsb,date:usb},a=>a.type);wsb=ap(Ro({type:Po("plain_number"),bk:rsb}));__c.xsb=ap(Ro({type:Po("currency"),bk:ssb}));ysb=ap(Ro({type:Po("percentage"),bk:tsb}));zsb=ap(Ro({type:Po("date"),bk:usb}));Asb=dp({attributes:{label:__c.rq},Rb:{fill:__c.Nq}});Bsb=gp(Asb);Csb=dp({values:{type:Po("select")},attributes:{bk:Zo(vsb)},Rb:{options:Bsb}});Dsb=ap(Ro({type:Po("mention")}));Esb=ap(Ro({type:Po("embed")}));
__c.Fsb=vp({plain_number:wsb,currency:__c.xsb,percentage:ysb,date:zsb,select:Csb,mention:Dsb,embed:Esb},a=>a.type,a=>a.type);Gsb=a=>dp({attributes:{ql:__c.wq},Rb:{content:Yo(Wo(a)),Uc:Yo(Wo(__c.Fsb))}});Hsb=Gsb(nsb);
Isb={static:{fontFamily:Pq.fontFamily,fontSize:Pq.fontSize,fontWeight:Pq.fontWeight,fontStyle:Pq.fontStyle,RR:Pq.RR,verticalAlign:Pq.verticalAlign,color:Pq.color,Sn:Pq.Sn,Oz:Pq.Oz,link:Pq.link,letterSpacing:Pq.letterSpacing,lineHeight:Pq.lineHeight,direction:Pq.direction,xB:Pq.xB,hL:Pq.hL},rVa:{},Yv:{}};__c.Jsb=__c.Ilb(Isb);
Ksb={zma:Dp("block",anb,"inherit"),yma:Dp("block",anb,"inherit"),Bma:Dp("block",anb,"inherit"),Ama:Dp("block",anb,"inherit"),uma:Dp("block",Zmb,"inherit"),tma:Dp("block",Zmb,"inherit"),wma:Dp("block",Zmb,"inherit"),vma:Dp("block",Zmb,"inherit"),B9a:Dp("block",cnb,"inherit"),A9a:Dp("block",cnb,"inherit"),D9a:Dp("block",cnb,"inherit"),C9a:Dp("block",cnb,"inherit")};Lsb=["auto",...Cqb];
Msb={static:{...Isb.static,cY:Dp("block",Ymb,"#ffffff"),...Ksb,textAlign:Ep("block",Lsb),mz:Ep("block",["overflow","wrap","clip"]),Hl:Ep("block",["middle","start","end"])},rVa:{},Yv:{}};__c.Rq=__c.Ilb(Msb);__c.Jrb=new Vqb;__c.Nsb=__c.Jrb.domain.aP();Osb=dp({values:{id:kq},attributes:{height:Nnb,minHeight:__c.vq}});Psb=dp({values:{id:kq},attributes:{width:Nnb}});gp(Osb);gp(Psb);Hrb=new __c.Rkb(Osb,akb(Osb.Vsa));Irb=new __c.Rkb(Psb,akb(Psb.Vsa));Qsb=dp({values:{Ija:kq,jGa:kq,Iee:jq}});Rsb=__c.$o(Qsb);
Ssb=dp({values:{type:Po("replace")},attributes:{Fk:Xo(Qpb),nOa:__c.rq,kGa:__c.rq}});Tsb=vp({replace:Ssb},a=>a.type,a=>a.type);Usb=gp(Tsb);Vsb=Gsb(osb);Wsb=Gsb(psb);Xsb=Gsb(qsb);Ysb=new lrb(Vsb);Zsb=new lrb(Wsb);$sb=new lrb(Xsb);__c.atb=(new lrb(Hsb)).domain.aP();__c.btb=new __c.Krb(Ysb);__c.ctb=new __c.Krb(Zsb);__c.dtb=new __c.Krb($sb);etb=dp({attributes:{xva:__c.xq,U2a:__c.xq}});ftb=dp({Rb:{freeze:etb}});
gtb=a=>dp({Rb:{ZQ:a,Tk:Rsb,Ss:__c.Oq,view:ftb,N5:Usb},attributes:{direction:Xo(Po("ltr","rtl")),fN:sq}});htb=a=>a.Ai({computed:{attributes:{width:void 0,height:void 0},Rb:{layout:void 0,rows:void 0,cols:void 0,Dnb:void 0,z$a:void 0,S2a:void 0,PTa:void 0,F3:void 0,G0:void 0,Kc:void 0,Mc:void 0},create:b=>Lmb(b)}});itb=gtb(__c.btb);__c.jtb=htb(itb);ktb=gtb(__c.ctb);__c.ltb=htb(ktb);mtb=gtb(__c.dtb);__c.ntb=htb(mtb);
}).call(self, self._5880d4398c473aa67256e87589eaef11);}

}])
//# sourceMappingURL=sourcemaps/5765a038b4e7aec5.js.map